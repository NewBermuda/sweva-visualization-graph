<html><head><meta charset="UTF-8"><script src="../bower_components/sigma/sigma.min.js">(function(e){"use strict";var t={},i=function(e){var s,r,o,a,n;i.classes.dispatcher.extend(this);var l=this,d=e||{};if("string"==typeof d||d instanceof HTMLElement?d={renderers:[d]}:"[object Array]"===Object.prototype.toString.call(d)&&(d={renderers:d}),a=d.renderers||d.renderer||d.container,d.renderers&&0!==d.renderers.length||("string"==typeof a||a instanceof HTMLElement||"object"==typeof a&&"container"in a)&&(d.renderers=[a]),d.id){if(t[d.id])throw'sigma: Instance "'+d.id+'" already exists.';Object.defineProperty(this,"id",{value:d.id})}else{for(n=0;t[n];)n++;Object.defineProperty(this,"id",{value:""+n})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,d.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),o=d.renderers||[],s=0,r=o.length;r>s;s++)this.addRenderer(o[s]);for(o=d.middlewares||[],s=0,r=o.length;r>s;s++)this.middlewares.push("string"==typeof o[s]?i.middlewares[o[s]]:o[s]);"object"==typeof d.graph&&d.graph&&(this.graph.read(d.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(i.prototype.addCamera=function(t){var s,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return s=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=s,s.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(s.edgequadtree=new i.classes.edgequad),s.bind("coordinatesUpdated",function(){r.renderCamera(s,s.isAnimated)}),this.renderersPerCamera[t]=[],s},i.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,i,s=this.renderersPerCamera[e.id];for(i=s.length,t=i-1;t>=0;t--)this.killRenderer(s[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,s,r,o,a=e||{};if("string"==typeof a?a={container:document.getElementById(a)}:a instanceof HTMLElement&&(a={container:a}),"string"==typeof a.container&&(a.container=document.getElementById(a.container)),"id"in a)t=a.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(s="function"==typeof a.type?a.type:i.renderers[a.type],s=s||i.renderers.def,r="camera"in a?a.camera instanceof i.classes.camera?a.camera:this.cameras[a.camera]||this.addCamera(a.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return o=new s(this.graph,r,this.settings,a),this.renderers[t]=o,Object.defineProperty(o,"id",{value:t}),o.bind&&o.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(o),o},i.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var s,r,o,a,n,l,d=0;for(t=t||{},a=this.middlewares||[],s=0,r=a.length;r>s;s++)a[s].call(this,0===s?"":"tmp"+d+":",s===r-1?"ready:":"tmp"+ ++d+":");for(o in this.cameras)n=this.cameras[o],n.settings("autoRescale")&&this.renderersPerCamera[n.id]&&this.renderersPerCamera[n.id].length?i.middlewares.rescale.call(this,a.length?"ready:":"",n.readPrefix,{width:this.renderersPerCamera[n.id][0].width,height:this.renderersPerCamera[n.id][0].height}):i.middlewares.copy.call(this,a.length?"ready:":"",n.readPrefix),t.skipIndexation||(l=i.utils.getBoundaries(this.graph,n.readPrefix),n.quadtree.index(this.graph.nodes(),{prefix:n.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),n.edgequadtree!==e&&n.settings("drawEdges")&&n.settings("enableEdgeHovering")&&n.edgequadtree.index(this.graph,{prefix:n.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(a=Object.keys(this.renderers),s=0,r=a.length;r>s;s++)if(this.renderers[a[s]].process)if(this.settings("skipErrors"))try{this.renderers[a[s]].process()}catch(h){console.log('Warning: The renderer "'+a[s]+'" crashed on ".process()"')}else this.renderers[a[s]].process();return this.render(),this},i.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;t>e;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(s){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,t){var i,s,r,o=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete o.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.1.0","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this),function(e){"use strict";function t(e,i){var s,r,o,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(a=Array.isArray(e)?e:e.split(/ /),s=0,r=a.length;s!==r;s+=1)o=a[s],N[o]||(N[o]=[]),N[o].push({handler:i})}function i(e,t){var i,s,r,o,a,n,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,s=l.length;i!==s;i+=1){if(n=l[i],N[n]){for(a=[],r=0,o=N[n].length;r!==o;r+=1)N[n][r].handler!==t&&a.push(N[n][r]);N[n]=a}N[n]&&0===N[n].length&&delete N[n]}else for(i=0,s=l.length;i!==s;i+=1)delete N[l[i]];else N=Object.create(null)}function s(e,t){var i,s,r,o,a,n,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(n=l[i],N[n])for(a={type:n,data:t||{}},s=0,o=N[n].length;s!==o;s+=1)try{N[n][s].handler(a)}catch(d){}}function r(){var e,t,i,s,r=!1,o=x(),a=A.shift();if(i=a.job(),o=x()-o,a.done++,a.time+=o,a.currentTime+=o,a.weightTime=a.currentTime/(a.weight||1),a.averageTime=a.time/a.done,s=a.count?a.count<=a.done:!i,!s){for(e=0,t=A.length;t>e;e++)if(A[e].weightTime>a.weightTime){A.splice(e,0,a),r=!0;break}r||A.push(a)}return s?a:null}function o(e){var t=A.length;w[e.id]=e,e.status="running",t&&(e.weightTime=A[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=x(),s("jobStarted",p(e)),A.push(e)}function a(){var e,t,i;for(e in E)t=E[e],t.after?T[e]=t:o(t),delete E[e];for(b=!!A.length;A.length&&x()-v<_.frameDuration;)if(i=r()){l(i.id);for(e in T)T[e].after===i.id&&(o(T[e]),delete T[e])}b?(v=x(),s("enterFrame"),setTimeout(a,0)):s("stop")}function n(e,t){var i,r,o;if(Array.isArray(e)){for(S=!0,i=0,r=e.length;r>i;i++)n(e[i].id,f(e[i],t));S=!1,b||(v=x(),s("start"),a())}else if("object"==typeof e)if("string"==typeof e.id)n(e.id,e);else{S=!0;for(i in e)"function"==typeof e[i]?n(i,f({job:e[i]},t)):n(i,f(e[i],t));S=!1,b||(v=x(),s("start"),a())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(h(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)o={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");o=f({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}E[e]=o,s("jobAdded",p(o)),b||S||(v=x(),s("start"),a())}return this}function l(e){var t,i,r,o,a=!1;if(Array.isArray(e))for(t=0,i=e.length;i>t;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[w,T,E],t=0,i=r.length;i>t;t++)e in r[t]&&(o=r[t][e],_.history&&(o.status="done",C.push(o)),s("jobEnded",p(o)),delete r[t][e],"function"==typeof o.end&&o.end(),a=!0);for(r=A,t=0,i=r.length;i>t;t++)if(r[t].id===e){r.splice(t,1);break}if(!a)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function d(){var e,t=f(E,w,T);if(_.history)for(e in t)t[e].status="done",C.push(t[e]),"function"==typeof t[e].end&&t[e].end();return E={},T={},w={},A=[],b=!1,this}function h(e){var t=E[e]||w[e]||T[e];return t?f(t):null}function c(){var e;if("string"==typeof a1&&1===arguments.length)return _[a1];e="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(e[a1]=a2);for(var t in e)void 0!==e[t]?_[t]=e[t]:delete _[t];return this}function g(){return b}function u(){return C=[],this}function m(e,t){var i,s,r,o,a,n,l;if(!arguments.length){a=[];for(s in E)a.push(E[s]);for(s in T)a.push(T[s]);for(s in w)a.push(w[s]);a=a.concat(C)}if("string"==typeof e)switch(e){case"waiting":a=y(T);break;case"running":a=y(w);break;case"done":a=C;break;default:n=e}if(e instanceof RegExp&&(n=e),!n&&("string"==typeof t||t instanceof RegExp)&&(n=t),n){if(l="string"==typeof n,a instanceof Array)i=a;else if("object"==typeof a){i=[];for(s in a)i=i.concat(a[s])}else{i=[];for(s in E)i.push(E[s]);for(s in T)i.push(T[s]);for(s in w)i.push(w[s]);i=i.concat(C)}for(a=[],r=0,o=i.length;o>r;r++)(l?i[r].id===n:i[r].id.match(n))&&a.push(i[r])}return p(a)}function f(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function p(e){var t,i,s;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,s=e.length;s>i;i++)t.push(p(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=p(e[i])}else t=e;return t}function y(e){var t,i=[];for(t in e)i.push(e[t]);return i}function x(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var v,b=!1,E={},w={},A=[],T={},C=[],S=!1,_={frameDuration:20,history:!0},N=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var P={hasJob:h,addJob:n,killJob:l,killAll:d,settings:c,getStats:m,isRunning:g,clearHistory:u,bind:t,unbind:i,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=P),exports.conrad=P),e.conrad=P}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}();var i={};sigma.utils.floatColor=function(e){if(i[e])return i[e];var t=e,s=0,r=0,o=0;"#"===e[0]?(e=e.slice(1),3===e.length?(s=parseInt(e.charAt(0)+e.charAt(0),16),r=parseInt(e.charAt(1)+e.charAt(1),16),o=parseInt(e.charAt(2)+e.charAt(2),16)):(s=parseInt(e.charAt(0)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(3),16),o=parseInt(e.charAt(4)+e.charAt(5),16))):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),s=+e[1],r=+e[2],o=+e[3]);var a=256*s*256+256*r+o;return i[t]=a,a},sigma.utils.zoomTo=function(e,t,i,s,r){var o,a,n,l=e.settings;a=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*s)),a!==e.ratio&&(s=a/e.ratio,n={x:t*(1-s)+e.x,y:i*(1-s)+e.y,ratio:a},r&&r.duration?(o=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:o?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,n,r)):(e.goTo(n),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,s){return{x:(e+i)/2+(s-t)/4,y:(t+s)/2+(e-i)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,s,r,o,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*s,y:Math.pow(1-e,2)*i+2*(1-e)*e*a+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,s,r,o,a,n,l){var d=Math.pow(1-e,3),h=3*e*Math.pow(1-e,2),c=3*Math.pow(e,2)*(1-e),g=Math.pow(e,3);return{x:d*t+h*o+c*n+g*s,y:d*i+h*a+c*l+g*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,s){return Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))},sigma.utils.getCircleIntersection=function(e,t,i,s,r,o){var a,n,l,d,h,c,g,u,m;if(n=s-e,l=r-t,d=Math.sqrt(l*l+n*n),d>i+o)return!1;if(d<Math.abs(i-o))return!1;a=(i*i-o*o+d*d)/(2*d),u=e+n*a/d,m=t+l*a/d,h=Math.sqrt(i*i-a*a),c=-l*(h/d),g=n*(h/d);var f=u+c,p=u-c,y=m+g,x=m-g;return{xi:f,xi_prime:p,yi:y,yi_prime:x}},sigma.utils.isPointOnSegment=function(e,t,i,s,r,o,a){var n=Math.abs((t-s)*(r-i)-(e-i)*(o-s)),l=sigma.utils.getDistance(i,s,r,o),d=n/l;return a>d&&Math.min(i,r)<=e&&e<=Math.max(i,r)&&Math.min(s,o)<=t&&t<=Math.max(s,o)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,s,r,o,a,n,l){var d=sigma.utils.getDistance(i,s,r,o);if(Math.abs(e-i)>d||Math.abs(t-s)>d)return!1;for(var h,c=sigma.utils.getDistance(e,t,i,s),g=sigma.utils.getDistance(e,t,r,o),u=.5,m=g>c?-.01:.01,f=.001,p=100,y=sigma.utils.getPointOnQuadraticCurve(u,i,s,r,o,a,n),x=sigma.utils.getDistance(e,t,y.x,y.y);p-- >0&&u>=0&&1>=u&&x>l&&(m>f||-f>m);)h=x,y=sigma.utils.getPointOnQuadraticCurve(u,i,s,r,o,a,n),x=sigma.utils.getDistance(e,t,y.x,y.y),x>h?(m=-m/2,u+=m):0>u+m||u+m>1?(m/=2,x=h):u+=m;return l>x},sigma.utils.isPointOnBezierCurve=function(e,t,i,s,r,o,a,n,l,d,h){var c=sigma.utils.getDistance(i,s,a,n);if(Math.abs(e-i)>c||Math.abs(t-s)>c)return!1;for(var g,u=sigma.utils.getDistance(e,t,i,s),m=sigma.utils.getDistance(e,t,r,o),f=.5,p=m>u?-.01:.01,y=.001,x=100,v=sigma.utils.getPointOnBezierCurve(f,i,s,r,o,a,n,l,d),b=sigma.utils.getDistance(e,t,v.x,v.y);x-- >0&&f>=0&&1>=f&&b>h&&(p>y||-y>p);)g=b,v=sigma.utils.getPointOnBezierCurve(f,i,s,r,o,a,n,l,d),b=sigma.utils.getDistance(e,t,v.x,v.y),b>g?(p=-p/2,f+=p):0>f+p||f+p>1?(p/=2,b=g):f+=p;return h>b},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,i){return t=t||sigma.utils.getX(e),i=i||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:i-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var s,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],s=e._doubleClickHandler[t],s.push(function(e){return r++,2===r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,s[s.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,s=(e._doubleClickHandler||{})[t]||[];i=s.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,s){var r,o=e.createShader(i);return e.shaderSource(o,t),e.compileShader(o),r=e.getShaderParameter(o,e.COMPILE_STATUS),r?o:(s&&s('Error compiling shader "'+o+'":'+e.getShaderInfoLog(o)),e.deleteShader(o),null)},sigma.utils.loadProgram=function(e,t,i,s,r){var o,a,n=e.createProgram();for(o=0;o<t.length;++o)e.attachShader(n,t[o]);if(i)for(o=0;o<i.length;++o)e.bindAttribLocation(n,locations?locations[o]:o,opt_attribs[o]);return e.linkProgram(n),a=e.getProgramParameter(n,e.LINK_STATUS),a?n:(r&&r("Error in program linking: "+e.getProgramInfoLog(n)),e.deleteProgram(n),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),s=Math.sin(e);return t?[i,-s,s,i]:[i,-s,0,s,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var s=i?2:3,r=e[0*s+0],o=e[0*s+1],a=e[0*s+2],n=e[1*s+0],l=e[1*s+1],d=e[1*s+2],h=e[2*s+0],c=e[2*s+1],g=e[2*s+2],u=t[0*s+0],m=t[0*s+1],f=t[0*s+2],p=t[1*s+0],y=t[1*s+1],x=t[1*s+2],v=t[2*s+0],b=t[2*s+1],E=t[2*s+2];return i?[r*u+o*p,r*m+o*y,n*u+l*p,n*m+l*y]:[r*u+o*p+a*v,r*m+o*y+a*b,r*f+o*x+a*E,n*u+l*p+d*v,n*m+l*y+d*b,n*f+l*x+d*E,h*u+c*p+g*v,h*m+c*y+g*b,h*f+c*x+g*E]}}.call(this),function(e){"use strict";var t,i=0,s=["ms","moz","webkit","o"];for(t=0;t<s.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[s[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[s[t]+"CancelAnimationFrame"]||e[s[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t){var s=(new Date).getTime(),r=Math.max(0,16-(s-i)),o=e.setTimeout(function(){t(s+r)},r);return i=s+r,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,s=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,s.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var e={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},e)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,s,r,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(o="string"==typeof e?e.split(" "):e,i=0,s=o.length;i!==s;i+=1)r=o[i],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,s,r,o,a,n,l,d="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(i=0,s=d.length;i!==s;i+=1){if(l=d[i],this._handlers[l]){for(n=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler!==t&&n.push(this._handlers[l][r]);this._handlers[l]=n}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,s=d.length;i!==s;i+=1)delete this._handlers[d[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,s,r,o,a,n,l,d=this,h="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,s=h.length;i!==s;i+=1)if(l=h[i],this._handlers[l]){for(n=d.getEvent(l,t),a=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler(n),this._handlers[l][r].one||a.push(this._handlers[l][r]);this._handlers[l]=a}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var s;for(s in e.prototype)e.prototype.hasOwnProperty(s)&&(t[s]=e.prototype[s]);e.apply(t,i)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,s={},r=Array.prototype.slice.call(arguments,0),o=function(e,t){var i,a,n,l;{if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:o(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),a=0,l=Object.keys(i),n=l.length;n>a;a++)s[l[a]]=i[l[a]];return this}if(void 0!==s[e])return s[e];for(a=0,n=r.length;n>a;a++)if(void 0!==r[a][e])return r[a][e]}};for(o.embedObjects=function(){var t=r.concat(s).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;i>t;t++)o(arguments[t]);return o};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(){"use strict";function e(e,t,i){var s=function(){var s,r;for(s in a[e])a[e][s].apply(t,arguments);r=i.apply(t,arguments);for(s in o[e])o[e][s].apply(t,arguments);return r};return s}function t(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var i=Object.create(null),s=Object.create(null),r=Object.create(null),o=Object.create(null),a=Object.create(null),n={immutable:!0,clone:!0},l=function(e){return n[e]},d=function(t){var s,o,a;a={settings:t||l,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(s in r)r[s].call(a);for(s in i)o=e(s,a,i[s]),this[s]=o,a[s]=o};d.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(i[e]||d[e])throw'The method "'+e+'" already exists.';return i[e]=t,o[e]=Object.create(null),a[e]=Object.create(null),this},d.hasMethod=function(e){return!(!i[e]&&!d[e])},d.attach=function(e,t,i,s){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var n;if("constructor"===e)n=r;else if(s){if(!a[e])throw'The method "'+e+'" does not exist.';n=a[e]}else{if(!o[e])throw'The method "'+e+'" does not exist.';n=o[e]}if(n[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return n[t]=i,this},d.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},d.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(s[e])throw'The index "'+e+'" already exists.';var i;s[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";d.attach(i,e,t[i])}return this},d.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,s=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(s[t]=e[t]);else s=e;return this.settings("immutable")?Object.defineProperty(s,"id",{value:i,enumerable:!0}):s.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(s),this.nodesIndex[s.id]=s,this}),d.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),this.allNeighborsIndex[i.source][i.target][i.id]=i,i.target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),d.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,s;for(delete this.nodesIndex[e],t=0,s=this.nodesArray.length;s>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),d.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,s;for(s=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;i>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[s.target][s.source][s.id],Object.keys(this.inNeighborsIndex[s.target][s.source]).length||delete this.inNeighborsIndex[s.target][s.source],delete this.outNeighborsIndex[s.source][s.target][s.id],Object.keys(this.outNeighborsIndex[s.source][s.target]).length||delete this.outNeighborsIndex[s.source][s.target],delete this.allNeighborsIndex[s.source][s.target][s.id],Object.keys(this.allNeighborsIndex[s.source][s.target]).length||delete this.allNeighborsIndex[s.source][s.target],s.target!==s.source&&(delete this.allNeighborsIndex[s.target][s.source][s.id],Object.keys(this.allNeighborsIndex[s.target][s.source]).length||delete this.allNeighborsIndex[s.target][s.source]),this.inNeighborsCount[s.target]--,this.outNeighborsCount[s.source]--,this.allNeighborsCount[s.source]--,this.allNeighborsCount[s.target]--,this}),d.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount;
}),d.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,t(this.nodesIndex),t(this.edgesIndex),t(this.nodesIndex),t(this.inNeighborsIndex),t(this.outNeighborsIndex),t(this.allNeighborsIndex),t(this.inNeighborsCount),t(this.outNeighborsCount),t(this.allNeighborsCount),this}),d.addMethod("read",function(e){var t,i,s;for(i=e.nodes||[],t=0,s=i.length;s>t;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,s=i.length;s>t;t++)this.addEdge(i[t]);return this}),d.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";s.push(this.nodesIndex[e[t]])}return s}throw"nodes: Wrong arguments."}),d.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,s,r=[];for(i=0,s=e.length;s>i;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t[e[i]])}return r}throw"degree: Wrong arguments."}),d.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";s.push(this.edgesIndex[e[t]])}return s}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=d):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.graph=d):this.graph=d}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,s){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof s&&s?i.embedObject(s):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,s,r=t||{},o=["x","y","ratio","angle"];for(i=0,s=o.length;s>i;i++)if(r[o[i]]!==e){if("number"!=typeof r[o[i]]||isNaN(r[o[i]]))throw'Value for "'+o[i]+'" is not a number.';this[o[i]]=r[o[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,s){s=s||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,o,a,n=s.nodes||this.graph.nodes(),l=s.edges||this.graph.edges(),d=Math.cos(this.angle),h=Math.sin(this.angle),c=Math.pow(this.ratio,this.settings("nodesPowRatio")),g=Math.pow(this.ratio,this.settings("edgesPowRatio")),u=(s.width||0)/2,m=(s.height||0)/2;for(r=0,o=n.length;o>r;r++)a=n[r],a[i+"x"]=(((a[t+"x"]||0)-this.x)*d+((a[t+"y"]||0)-this.y)*h)/this.ratio+u,a[i+"y"]=(((a[t+"y"]||0)-this.y)*d-((a[t+"x"]||0)-this.x)*h)/this.ratio+m,a[i+"size"]=(a[t+"size"]||0)/c;for(r=0,o=l.length;o>r;r++)l[r][i+"size"]=(l[r][t+"size"]||0)/g;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:(e*o+t*a)/this.ratio+s,y:(t*o-e*a)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:((e-s)*o-(t-r)*a)*this.ratio,y:((t-r)*o+(e-s)*a)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y),s=sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e));return s},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),s=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),o=this.cameraPosition(e/4,0,!0).x,a=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-o,y1:this.y-r.y-a,x2:this.x-r.x+o+i.x,y2:this.y-r.y-a+i.y,height:Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y+2*a,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,o=e.x<i;return r?o?0:1:o?2:3}function i(e,t){for(var i=[],s=0;4>s;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;4>s;s++)d.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=n,s=d;break;case 1:i=n+o,s=d;break;case 2:i=n,s=d+a;break;case 3:i=n+o,s=d+a}return l({x:i,y:s,width:o,height:a},r,t.maxElements,t.maxLevel)}function o(t,s,a){if(a.level<a.maxLevel)for(var n=i(s,a.corners),l=0,d=n.length;d>l;l++)a.nodes[n[l]]===e&&(a.nodes[n[l]]=r(n[l],a)),o(t,s,a.nodes[n[l]]);else a.elements.push(t)}function a(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?a(i,s.nodes[r]):[]}return s.elements}function n(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),a=0,l=o.length;l>a;a++)i.nodes[o[a]]!==e&&n(t,i.nodes[o[a]],s,r);else for(var d=0,h=i.elements.length;h>d;d++)r[i.elements[d].id]===e&&(r[i.elements[d].id]=i.elements[d]);return r}function l(e,t,i,s){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||20,maxLevel:s||4,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;4>o;o++){var a=this.projection(t[o],e),n=this.projection(i[o],e);s.push(a.x*e.x+a.y*e.y),r.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s),c=Math.min.apply(Math,r);return l>=c&&d>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;4>r;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1}};h.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var s=0,r=e.length;r>s;s++)o(e[s],d.pointToSquare({x:e[s][i+"x"],y:e[s][i+"y"],size:e[s][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._tree?a({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){var t,r,o=JSON.stringify(e);if(this._cache.query===o)return this._cache.result;d.isAxisAligned(e)?(t=i,r=d.axisAlignedTopPoints(e)):(t=s,r=d.rectangleCorners(e));var a=this._tree?n(r,this._tree,t):[],l=[];for(var h in a)l.push(a[h]);return this._cache.query=o,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.quad=h):this.quad=h}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,o=e.x<i;return r?o?0:1:o?2:3}function i(e,t){for(var i=[],s=0;4>s;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;4>s;s++)d.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=n,s=d;break;case 1:i=n+o,s=d;break;case 2:i=n,s=d+a;break;case 3:i=n+o,s=d+a}return l({x:i,y:s,width:o,height:a},r,t.maxElements,t.maxLevel)}function o(t,s,a){if(a.level<a.maxLevel)for(var n=i(s,a.corners),l=0,d=n.length;d>l;l++)a.nodes[n[l]]===e&&(a.nodes[n[l]]=r(n[l],a)),o(t,s,a.nodes[n[l]]);else a.elements.push(t)}function a(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?a(i,s.nodes[r]):[]}return s.elements}function n(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),a=0,l=o.length;l>a;a++)i.nodes[o[a]]!==e&&n(t,i.nodes[o[a]],s,r);else for(var d=0,h=i.elements.length;h>d;d++)r[i.elements[d].id]===e&&(r[i.elements[d].id]=i.elements[d]);return r}function l(e,t,i,s){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||40,maxLevel:s||8,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),s=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),o=Math.min(e.y1,e.y2,i.y),a=Math.max(e.y1,e.y2,i.y);return{x1:s-e.size,y1:o-e.size,x2:r+e.size,y2:o-e.size,height:a-o+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),s=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),o=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:o-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;4>o;o++){var a=this.projection(t[o],e),n=this.projection(i[o],e);s.push(a.x*e.x+a.y*e.y),r.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s),c=Math.min.apply(Math,r);return l>=c&&d>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;4>r;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};h.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,s,r,a,n,h=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var c=e.edges(),g=0,u=c.length;u>g;g++)s=e.nodes(c[g].source),r=e.nodes(c[g].target),n={x1:s[h+"x"],y1:s[h+"y"],x2:r[h+"x"],y2:r[h+"y"],size:c[g][h+"size"]||0},"curve"===c[g].type||"curvedArrow"===c[g].type?s.id===r.id?(a={x:s[h+"x"],y:s[h+"y"],size:s[h+"size"]||0},o(c[g],d.selfLoopToSquare(a),this._tree)):(i=sigma.utils.getQuadraticControlPoint(n.x1,n.y1,n.x2,n.y2),o(c[g],d.quadraticCurveToSquare(n,i),this._tree)):o(c[g],d.lineToSquare(n),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._enabled&&this._tree?a({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){if(!this._enabled)return[];var t,r,o=JSON.stringify(e);if(this._cache.query===o)return this._cache.result;d.isAxisAligned(e)?(t=i,r=d.axisAlignedTopPoints(e)):(t=s,r=d.rectangleCorners(e));var a=this._tree?n(r,this._tree,t):[],l=[];for(var h in a)l.push(a[h]);return this._cache.query=o,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.edgequad=h):this.edgequad=h}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function s(e){var t,i,s;return T("mouseEnabled")&&(E.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),p)?(y=!0,x=!0,b&&clearTimeout(b),b=setTimeout(function(){y=!1},T("dragTimeout")),sigma.misc.animation.killAll(A),A.isMoving=!0,s=A.cameraPosition(sigma.utils.getX(e)-m,sigma.utils.getY(e)-f,!0),t=h-s.x,i=c-s.y,(t!==A.x||i!==A.y)&&(g=A.x,u=A.y,A.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function r(e){if(T("mouseEnabled")&&p){p=!1,b&&clearTimeout(b),A.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);y?(sigma.misc.animation.killAll(A),sigma.misc.animation.camera(A,{x:A.x+T("mouseInertiaRatio")*(A.x-g),y:A.y+T("mouseInertiaRatio")*(A.y-u)},{easing:"quadraticOut",duration:T("mouseInertiaDuration")})):(m!==t||f!==i)&&A.goTo({x:A.x,y:A.y}),E.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),y=!1}}function o(e){if(T("mouseEnabled"))switch(h=A.x,c=A.y,g=A.x,u=A.y,m=sigma.utils.getX(e),f=sigma.utils.getY(e),x=!1,v=(new Date).getTime(),e.which){case 2:break;case 3:E.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,m,f));break;default:p=!0,E.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,m,f))}}function a(){T("mouseEnabled")&&E.dispatchEvent("mouseout")}function n(e){if(T("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-v>100&&x,E.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,s;return T("mouseEnabled")?(i=1/T("doubleClickZoomingRatio"),E.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,m,f)),T("doubleClickEnabled")&&(t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("doubleClickZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function d(e){var t,i,s;return T("mouseEnabled")&&T("mouseWheelEnabled")?(i=sigma.utils.getDelta(e)>0?1/T("zoomingRatio"):T("zoomingRatio"),t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("mouseZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var h,c,g,u,m,f,p,y,x,v,b,E=this,w=e,A=t,T=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(w,"click",l),w.addEventListener("DOMMouseScroll",d,!1),w.addEventListener("mousewheel",d,!1),w.addEventListener("mousemove",s,!1),w.addEventListener("mousedown",o,!1),w.addEventListener("click",n,!1),w.addEventListener("mouseout",a,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(w,"click"),w.removeEventListener("DOMMouseScroll",d),w.removeEventListener("mousewheel",d),w.removeEventListener("mousemove",s),w.removeEventListener("mousedown",o),w.removeEventListener("click",n),w.removeEventListener("mouseout",a),document.removeEventListener("mouseup",r)}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function s(e){var t=sigma.utils.getOffset(_);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(P("touchEnabled")){var t,i,r,o,a,n;switch(M=e.touches,M.length){case 1:N.isMoving=!0,w=1,l=N.x,d=N.y,g=N.x,u=N.y,a=s(M[0]),p=a.x,y=a.y;break;case 2:return N.isMoving=!0,w=2,a=s(M[0]),n=s(M[1]),t=a.x,r=a.y,i=n.x,o=n.y,g=N.x,u=N.y,h=N.angle,c=N.ratio,l=N.x,d=N.y,p=t,y=r,x=i,v=o,b=Math.atan2(v-y,x-p),E=Math.sqrt((v-y)*(v-y)+(x-p)*(x-p)),e.preventDefault(),!1}}}function o(e){if(P("touchEnabled")){M=e.touches;var t=P("touchInertiaRatio");switch(C&&(A=!1,clearTimeout(C)),w){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:N.isMoving=!1,S.dispatchEvent("stopDrag"),A&&(T=!1,sigma.misc.animation.camera(N,{x:N.x+t*(N.x-g),y:N.y+t*(N.y-u)},{easing:"quadraticOut",duration:P("touchInertiaDuration")})),A=!1,w=0}}}function a(e){if(!T&&P("touchEnabled")){var t,i,r,o,a,n,_,k,O,R,z,L,I,F,j,D,B;switch(M=e.touches,A=!0,C&&clearTimeout(C),C=setTimeout(function(){A=!1},P("dragTimeout")),w){case 1:k=s(M[0]),t=k.x,r=k.y,R=N.cameraPosition(t-p,r-y,!0),F=l-R.x,j=d-R.y,(F!==N.x||j!==N.y)&&(g=N.x,u=N.y,N.goTo({x:F,y:j}),S.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,k.x,k.y)),S.dispatchEvent("drag"));break;case 2:k=s(M[0]),O=s(M[1]),t=k.x,r=k.y,i=O.x,o=O.y,z=N.cameraPosition((p+x)/2-sigma.utils.getCenter(e).x,(y+v)/2-sigma.utils.getCenter(e).y,!0),_=N.cameraPosition((t+i)/2-sigma.utils.getCenter(e).x,(r+o)/2-sigma.utils.getCenter(e).y,!0),L=Math.atan2(o-r,i-t)-b,I=Math.sqrt((o-r)*(o-r)+(i-t)*(i-t))/E,t=z.x,r=z.y,D=c/I,t*=I,r*=I,B=h-L,a=Math.cos(-L),n=Math.sin(-L),i=t*a+r*n,o=r*a-t*n,t=i,r=o,F=t-_.x+l,j=r-_.y+d,(D!==N.ratio||B!==N.angle||F!==N.x||j!==N.y)&&(g=N.x,u=N.y,m=N.angle,f=N.ratio,N.goTo({x:F,y:j,angle:B,ratio:D}),S.dispatchEvent("drag"))}return e.preventDefault(),!1}}function n(e){var t,i,r;return e.touches&&1===e.touches.length&&P("touchEnabled")?(T=!0,i=1/P("doubleClickZoomingRatio"),t=s(e.touches[0]),S.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),P("doubleClickEnabled")&&(t=N.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),r={duration:P("doubleClickZoomDuration"),onComplete:function(){T=!1}},sigma.utils.zoomTo(N,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var l,d,h,c,g,u,m,f,p,y,x,v,b,E,w,A,T,C,S=this,_=e,N=t,P=i,M=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(_,"touchstart",n),_.addEventListener("touchstart",r,!1),_.addEventListener("touchend",o,!1),_.addEventListener("touchcancel",o,!1),_.addEventListener("touchleave",o,!1),_.addEventListener("touchmove",a,!1),this.kill=function(){sigma.utils.unbindDoubleClick(_,"touchstart"),_.addEventListener("touchstart",r),_.addEventListener("touchend",o),_.addEventListener("touchcancel",o),_.addEventListener("touchleave",o),_.addEventListener("touchmove",a)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.canvas: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=a.length;o>r;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var i,s,r,o,a,n,l,d,h,c,g,u,m,f={},p=this.graph,y=this.graph.nodes,x=(this.options.prefix||"",this.settings(t,"drawEdges")),v=this.settings(t,"drawNodes"),b=this.settings(t,"drawLabels"),E=this.settings(t,"drawEdgeLabels"),w=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(x=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)f[i[s].id]=i[s];if(x){for(i=p.edges(),s=0,o=i.length;o>s;s++)a=i[s],!f[a.source]&&!f[a.target]||a.hidden||y(a.source).hidden||y(a.target).hidden||this.edgesOnScreen.push(a);if(this.settings(t,"batchEdgesDrawing"))n="edges_"+this.conradId,u=w("canvasEdgesBatchSize"),c=this.edgesOnScreen,o=c.length,h=0,l=Math.min(c.length,h+u),d=function(){for(m=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",g=sigma.canvas.edges,s=h;l>s;s++)a=c[s],(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.edges,w);if(E)for(g=sigma.canvas.edges.labels,s=h;l>s;s++)a=c[s],a.hidden||(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.labels,w);return this.contexts.edges.globalCompositeOperation=m,l===c.length?(delete this.jobs[n],!1):(h=l+1,l=Math.min(c.length,h+u),!0)},this.jobs[n]=d,conrad.addJob(n,d.bind(this));else{for(g=sigma.canvas.edges,i=this.edgesOnScreen,s=0,o=i.length;o>s;s++)a=i[s],(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.edges,w);if(E)for(g=sigma.canvas.edges.labels,i=this.edgesOnScreen,s=0,o=i.length;o>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultEdgeType")]||g.def)(i[s],p.nodes(i[s].source),p.nodes(i[s].target),this.contexts.labels,w)}}if(v)for(g=sigma.canvas.nodes,i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultNodeType")]||g.def)(i[s],this.contexts.nodes,w);if(b)for(g=sigma.canvas.labels,i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultNodeType")]||g.def)(i[s],this.contexts.labels,w);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var s,r=this.width,o=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||o!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.domElements[s].setAttribute("width",t*a+"px"),this.domElements[s].setAttribute("height",i*a+"px"),1!==a&&this.contexts[s].scale(a,a));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.webgl: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(s,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=a.length;o>r;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,s,r,o,a=this.graph,n=sigma.utils.extend(n,this.options),l=this.settings(n,"defaultEdgeType"),d=this.settings(n,"defaultNodeType");for(s in this.nodeFloatArrays)delete this.nodeFloatArrays[s];for(s in this.edgeFloatArrays)delete this.edgeFloatArrays[s];for(s in this.edgeIndicesArrays)delete this.edgeIndicesArrays[s];for(e=a.edges(),t=0,i=e.length;i>t;t++)r=e[t].type||l,s=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[s]||(this.edgeFloatArrays[s]={edges:[]}),this.edgeFloatArrays[s].edges.push(e[t]);for(e=a.nodes(),t=0,i=e.length;i>t;t++)r=e[t].type||d,s=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[s]||(this.nodeFloatArrays[s]={nodes:[]}),this.nodeFloatArrays[s].nodes.push(e[t]);for(s in this.edgeFloatArrays){for(o=sigma.webgl.edges[s],e=this.edgeFloatArrays[s].edges,this.edgeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;i>t;t++)e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||o.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,n.prefix,this.settings);"function"==typeof o.computeIndices&&(this.edgeIndicesArrays[s]=o.computeIndices(this.edgeFloatArrays[s].array))}for(s in this.nodeFloatArrays)for(o=sigma.webgl.nodes[s],e=this.nodeFloatArrays[s].nodes,this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;i>t;t++)this.nodeFloatArrays[s].array||(this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES)),e[t].hidden||o.addNode(e[t],this.nodeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,n.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,s,r,o,a,n,l=this,d=(this.graph,this.contexts.nodes),h=this.contexts.edges,c=this.camera.getMatrix(),g=sigma.utils.extend(t,this.options),u=this.settings(g,"drawLabels"),m=this.settings(g,"drawEdges"),f=this.settings(g,"drawNodes");this.resize(!1),this.settings(g,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),c=sigma.utils.matrices.multiply(c,sigma.utils.matrices.translation(this.width/2,this.height/2));for(o in this.jobs)conrad.hasJob(o)&&conrad.killJob(o);if(m)if(this.settings(g,"batchEdgesDrawing"))(function(){var e,t,i,s,r,o,a,n,l,d;i="edges_"+this.conradId,d=this.settings(g,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,l=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,n=this.edgeIndicesArrays[e[t]],a=0,o=Math.min(a+d*l.POINTS,r.length/l.ATTRIBUTES),s=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=l.initProgram(h)),o>a&&(h.useProgram(this.edgePrograms[e[t]]),l.render(h,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio"),start:a,count:o-a,indicesData:n})),o>=r.length/l.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(o>=r.length/l.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,l=sigma.webgl.edges[e[t]],a=0,o=Math.min(a+d*l.POINTS,r.length/l.ATTRIBUTES)):(a=o,o=Math.min(a+d*l.POINTS,r.length/l.ATTRIBUTES)),!0)},this.jobs[i]=s,conrad.addJob(i,s.bind(this)))}).call(this);else for(o in this.edgeFloatArrays)n=sigma.webgl.edges[o],this.edgePrograms[o]||(this.edgePrograms[o]=n.initProgram(h)),this.edgeFloatArrays[o]&&(h.useProgram(this.edgePrograms[o]),n.render(h,this.edgePrograms[o],this.edgeFloatArrays[o].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio"),
indicesData:this.edgeIndicesArrays[o]}));if(f){d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND);for(o in this.nodeFloatArrays)n=sigma.webgl.nodes[o],this.nodePrograms[o]||(this.nodePrograms[o]=n.initProgram(d)),this.nodeFloatArrays[o]&&(d.useProgram(this.nodePrograms[o]),n.render(d,this.nodePrograms[o],this.nodeFloatArrays[o].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio")}))}if(u)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),a=function(e){return l.settings({prefix:l.camera.prefix},e)},s=0,r=i.length;r>s;s++)i[s].hidden||(sigma.canvas.labels[i[s].type||this.settings(g,"defaultNodeType")]||sigma.canvas.labels.def)(i[s],this.contexts.labels,a);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var s=document.createElement(e),r=this;s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(s.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),s.addEventListener("webglcontextrestored",function(){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,i){var s,r=this.width,o=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||o!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.contexts[s]&&this.contexts[s].scale?(this.domElements[s].setAttribute("width",t*a+"px"),this.domElements[s].setAttribute("height",i*a+"px"),1!==a&&this.contexts[s].scale(a,a)):(this.domElements[s].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[s].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(s in this.contexts)this.contexts[s]&&this.contexts[s].viewport&&this.contexts[s].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.svg: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=a.length;o>r;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var i,s,r,o,a,n,l,d,h,c={},g=this.graph,u=this.graph.nodes,m=(this.options.prefix||"",this.settings(t,"drawEdges")),f=this.settings(t,"drawNodes"),p=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)c[i[s].id]=i[s];for(i=g.edges(),s=0,o=i.length;o>s;s++)a=i[s],!c[a.source]&&!c[a.target]||a.hidden||u(a.source).hidden||u(a.target).hidden||this.edgesOnScreen.push(a);if(d=sigma.svg.nodes,h=sigma.svg.labels,f)for(i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)i[s].hidden||this.domElements.nodes[i[s].id]||(r=(d[i[s].type]||d.def).create(i[s],p),this.domElements.nodes[i[s].id]=r,this.domElements.groups.nodes.appendChild(r),r=(h[i[s].type]||h.def).create(i[s],p),this.domElements.labels[i[s].id]=r,this.domElements.groups.labels.appendChild(r));if(f)for(i=this.nodesOnScreen,s=0,o=i.length;o>s;s++)i[s].hidden||((d[i[s].type]||d.def).update(i[s],this.domElements.nodes[i[s].id],p),(h[i[s].type]||h.def).update(i[s],this.domElements.labels[i[s].id],p));if(d=sigma.svg.edges,m)for(i=this.edgesOnScreen,s=0,o=i.length;o>s;s++)this.domElements.edges[i[s].id]||(n=u(i[s].source),l=u(i[s].target),r=(d[i[s].type]||d.def).create(i[s],n,l,p),this.domElements.edges[i[s].id]=r,this.domElements.groups.edges.appendChild(r));if(m)for(i=this.edgesOnScreen,s=0,o=i.length;o>s;s++)n=u(i[s].source),l=u(i[s].target),(d[i[s].type]||d.def).update(i[s],this.domElements.edges[i[s].id],n,l,p);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i,s,r=document.createElementNS(this.settings("xmlns"),e),o=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",o+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var a=document.createElement("canvas");a.setAttribute("class",o+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var n=["edges","nodes","labels","hovers"];for(s=0,i=n.length;i>s;s++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",o+"-group-"+n[s]),t.setAttributeNS(null,"class",o+"-group"),this.domElements.groups[n[s]]=this.domElements.graph.appendChild(t);this.container.appendChild(a),this.measurementCanvas=a.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){function t(t){var i=t.data.node,s=a.settings.embedObjects({prefix:e});if(s("enableHovering")){var n=(o[i.type]||o.def).create(i,a.domElements.nodes[i.id],a.measurementCanvas,s);a.domElements.hovers[i.id]=n,a.domElements.groups.hovers.appendChild(n),r=i}}function i(t){var i=t.data.node,s=a.settings.embedObjects({prefix:e});s("enableHovering")&&(a.domElements.groups.hovers.removeChild(a.domElements.hovers[i.id]),r=null,delete a.domElements.hovers[i.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[i.id]))}function s(){if(r){var t=a.settings.embedObjects({prefix:e});a.domElements.groups.hovers.removeChild(a.domElements.hovers[r.id]),delete a.domElements.hovers[r.id];var i=(o[r.type]||o.def).create(r,a.domElements.nodes[r.id],a.measurementCanvas,t);a.domElements.hovers[r.id]=i,a.domElements.groups.hovers.appendChild(i)}}var r,o=sigma.svg.hovers,a=this;this.bind("overNode",t),this.bind("outNode",i),this.bind("render",s)},sigma.renderers.svg.prototype.resize=function(t,i){var s=this.width,r=this.height,o=1;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),(s!==this.width||r!==this.height)&&(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=i+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",t*o),this.domElements.graph.setAttribute("height",i*o))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,i=!!e.WebGLRenderingContext;if(i){t=document.createElement("canvas");try{i=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(s){i=!1}}sigma.renderers.def=i?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,s,r){var o=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=0,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=2*Math.PI/3,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=4*Math.PI/3},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),d=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(d,s.width,s.height),e.uniform1f(c,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(g,s.scalingRatio),e.uniformMatrix3fv(h,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,s,r){t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,s.width,s.height),e.uniform1f(h,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(c,s.scalingRatio),e.uniformMatrix3fv(d,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,s,r,o,a){var n=(e[o+"size"]||1)/2,l=t[o+"x"],d=t[o+"y"],h=i[o+"x"],c=i[o+"y"],g=e.color;if(!g)switch(a("edgeColor")){case"source":g=t.color||a("defaultNodeColor");break;case"target":g=i.color||a("defaultNodeColor");break;default:g=a("defaultEdgeColor")}g=sigma.utils.floatColor(g),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=1,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=1,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=0,s[r++]=g},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position1"),n=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_minus"),h=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_matrixHalfPi"),u=e.getUniformLocation(t,"u_matrixHalfPiMinus"),m=e.getUniformLocation(t,"u_ratio"),f=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(h,s.width,s.height),e.uniform1f(m,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(f,s.scalingRatio),e.uniformMatrix3fv(c,!1,s.matrix),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,s,r,o,a){var n=((e[o+"size"]||1)/2,t[o+"x"]),l=t[o+"y"],d=i[o+"x"],h=i[o+"y"],c=e.color;if(!c)switch(a("edgeColor")){case"source":c=t.color||a("defaultNodeColor");break;case"target":c=i.color||a("defaultNodeColor");break;default:c=a("defaultEdgeColor")}c=sigma.utils.floatColor(c),s[r++]=n,s[r++]=l,s[r++]=c,s[r++]=d,s[r++]=h,s[r++]=c},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position"),n=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(n,s.width,s.height),e.uniformMatrix3fv(l,!1,s.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,s,r,o,a){var n=(e[o+"size"]||1)/2,l=t[o+"x"],d=t[o+"y"],h=i[o+"x"],c=i[o+"y"],g=i[o+"size"],u=e.color;if(!u)switch(a("edgeColor")){case"source":u=t.color||a("defaultNodeColor");break;case"target":u=i.color||a("defaultNodeColor");break;default:u=a("defaultEdgeColor")}u=sigma.utils.floatColor(u),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=g,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=g,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=n,s[r++]=g,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=-1,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=1,s[r++]=u},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_pos1"),a=e.getAttribLocation(t,"a_pos2"),n=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),d=e.getAttribLocation(t,"a_delay"),h=e.getAttribLocation(t,"a_minus"),c=e.getAttribLocation(t,"a_head"),g=e.getAttribLocation(t,"a_headPosition"),u=e.getAttribLocation(t,"a_color"),m=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),p=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),x=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_nodeRatio"),b=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(m,s.width,s.height),e.uniform1f(x,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(v,Math.pow(s.ratio,s.settings("nodesPowRatio"))/s.ratio),e.uniform1f(b,5),e.uniform1f(E,s.scalingRatio),e.uniformMatrix3fv(f,!1,s.matrix),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.enableVertexAttribArray(h),e.enableVertexAttribArray(c),e.enableVertexAttribArray(g),e.enableVertexAttribArray(u),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var s,r=i("prefix")||"",o=e[r+"size"];o<i("labelThreshold")||e.label&&"string"==typeof e.label&&(s="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*o,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+s+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+o+3),Math.round(e[r+"y"]+s/3)))}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var s,r,o,a,n,l=i("hoverFontStyle")||i("fontStyle"),d=i("prefix")||"",h=e[d+"size"],c="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*h;t.font=(l?l+" ":"")+c+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(s=Math.round(e[d+"x"]-c/2-2),r=Math.round(e[d+"y"]-c/2-2),o=Math.round(t.measureText(e.label).width+c/2+h+7),a=Math.round(c+4),n=Math.round(c/2+2),t.moveTo(s,r+n),t.arcTo(s,r,s+n,r,n),t.lineTo(s+o,r),t.lineTo(s+o,r+a),t.lineTo(s+n,r+a),t.arcTo(s,r+a,s,r+a-n,n),t.lineTo(s,r+n),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[d+"x"],e[d+"y"],h+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var g=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;g(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[d+"x"]+h+3),Math.round(e[d+"y"]+c/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var s=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[s+"x"],e[s+"y"],e[s+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},g=t[a+"size"],u=t[a+"x"],m=t[a+"y"],f=i[a+"x"],p=i[a+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,g):sigma.utils.getQuadraticControlPoint(u,m,f,p),!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,f,p):s.quadraticCurveTo(c.x,c.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,c=i[a+"size"],g=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],p=Math.max(2.5*h,r("minArrowSize")),y=Math.sqrt(Math.pow(m-g,2)+Math.pow(f-u,2)),x=g+(m-g)*(y-p-c)/y,v=u+(f-u)*(y-p-c)/y,b=(m-g)*p/y,E=(f-u)*p/y;if(!o)switch(n){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=d}s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(g,u),s.lineTo(x,v),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,i,s,r){var o,a,n,l,d,h=e.color,c=r("prefix")||"",g=r("edgeColor"),u=r("defaultNodeColor"),m=r("defaultEdgeColor"),f={},p=e[c+"size"]||1,y=i[c+"size"],x=t[c+"x"],v=t[c+"y"],b=i[c+"x"],E=i[c+"y"],w=Math.max(2.5*p,r("minArrowSize"));if(f=t.id===i.id?sigma.utils.getSelfLoopControlPoints(x,v,y):sigma.utils.getQuadraticControlPoint(x,v,b,E),t.id===i.id?(o=Math.sqrt(Math.pow(b-f.x1,2)+Math.pow(E-f.y1,2)),a=f.x1+(b-f.x1)*(o-w-y)/o,n=f.y1+(E-f.y1)*(o-w-y)/o,l=(b-f.x1)*w/o,d=(E-f.y1)*w/o):(o=Math.sqrt(Math.pow(b-f.x,2)+Math.pow(E-f.y,2)),a=f.x+(b-f.x)*(o-w-y)/o,n=f.y+(E-f.y)*(o-w-y)/o,l=(b-f.x)*w/o,d=(E-f.y)*w/o),!h)switch(g){case"source":h=t.color||u;break;case"target":h=i.color||u;break;default:h=m}s.strokeStyle=h,s.lineWidth=p,s.beginPath(),s.moveTo(x,v),t.id===i.id?s.bezierCurveTo(f.x2,f.y2,f.x1,f.y1,a,n):s.quadraticCurveTo(f.x,f.y,a,n),s.stroke(),s.fillStyle=h,s.beginPath(),s.moveTo(a+l,n+d),s.lineTo(a+.6*d,n-.6*l),s.lineTo(a-.6*d,n+.6*l),s.lineTo(a+l,n+d),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,n*=r("edgeHoverSizeRatio"),s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=r("edgeHoverSizeRatio")*(e[a+"size"]||1),l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},g=t[a+"size"],u=t[a+"x"],m=t[a+"y"],f=i[a+"x"],p=i[a+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,g):sigma.utils.getQuadraticControlPoint(u,m,f,p),!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,f,p):s.quadraticCurveTo(c.x,c.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,s,r){
var o=e.color,a=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,c=i[a+"size"],g=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"];h=e.hover?r("edgeHoverSizeRatio")*h:h;var p=2.5*h,y=Math.sqrt(Math.pow(m-g,2)+Math.pow(f-u,2)),x=g+(m-g)*(y-p-c)/y,v=u+(f-u)*(y-p-c)/y,b=(m-g)*p/y,E=(f-u)*p/y;if(!o)switch(n){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=d}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(g,u),s.lineTo(x,v),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var o,a,n,l,d,h,c=e.color,g=r("prefix")||"",u=r("edgeColor"),m=r("defaultNodeColor"),f=r("defaultEdgeColor"),p={},y=r("edgeHoverSizeRatio")*(e[g+"size"]||1),x=i[g+"size"],v=t[g+"x"],b=t[g+"y"],E=i[g+"x"],w=i[g+"y"];if(p=t.id===i.id?sigma.utils.getSelfLoopControlPoints(v,b,x):sigma.utils.getQuadraticControlPoint(v,b,E,w),t.id===i.id?(o=Math.sqrt(Math.pow(E-p.x1,2)+Math.pow(w-p.y1,2)),a=2.5*y,n=p.x1+(E-p.x1)*(o-a-x)/o,l=p.y1+(w-p.y1)*(o-a-x)/o,d=(E-p.x1)*a/o,h=(w-p.y1)*a/o):(o=Math.sqrt(Math.pow(E-p.x,2)+Math.pow(w-p.y,2)),a=2.5*y,n=p.x+(E-p.x)*(o-a-x)/o,l=p.y+(w-p.y)*(o-a-x)/o,d=(E-p.x)*a/o,h=(w-p.y)*a/o),!c)switch(u){case"source":c=t.color||m;break;case"target":c=i.color||m;break;default:c=f}c="edge"===r("edgeHoverColor")?e.hover_color||c:e.hover_color||r("defaultEdgeHoverColor")||c,s.strokeStyle=c,s.lineWidth=y,s.beginPath(),s.moveTo(v,b),t.id===i.id?s.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,n,l):s.quadraticCurveTo(p.x,p.y,n,l),s.stroke(),s.fillStyle=c,s.beginPath(),s.moveTo(n+d,l+h),s.lineTo(n+.6*h,l-.6*d),s.lineTo(n-.6*h,l+.6*d),s.lineTo(n+d,l+h),s.closePath(),s.fill()}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,s,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,s,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,s,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){var i=(t("prefix")||"",document.createElementNS(t("xmlns"),"circle"));return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var s=i("prefix")||"";return t.setAttributeNS(null,"cx",e[s+"x"]),t.setAttributeNS(null,"cy",e[s+"y"]),t.setAttributeNS(null,"r",e[s+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,i,s){var r=e.color,o=(s("prefix")||"",s("edgeColor")),a=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=n}var l=document.createElementNS(s("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var o=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[o+"size"]||1),t.setAttributeNS(null,"x1",i[o+"x"]),t.setAttributeNS(null,"y1",i[o+"y"]),t.setAttributeNS(null,"x2",s[o+"x"]),t.setAttributeNS(null,"y2",s[o+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,i,s){var r=e.color,o=(s("prefix")||"",s("edgeColor")),a=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=n}var l=document.createElementNS(s("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var o=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[o+"size"]||1);var a=(i[o+"x"]+s[o+"x"])/2+(s[o+"y"]-i[o+"y"])/4,n=(i[o+"y"]+s[o+"y"])/2+(i[o+"x"]-s[o+"x"])/4,l="M"+i[o+"x"]+","+i[o+"y"]+" Q"+a+","+n+" "+s[o+"x"]+","+s[o+"y"];return t.setAttributeNS(null,"d",l),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var i=t("prefix")||"",s=e[i+"size"],r=document.createElementNS(t("xmlns"),"text"),o="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*s,a="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",o),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",a),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],o="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;return!i("forceLabels")&&r<i("labelThreshold")||"string"!=typeof e.label?void 0:(t.setAttributeNS(null,"x",Math.round(e[s+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[s+"y"]+o/3)),t.style.display="",this)}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,i,s){var r,o,a,n,l,d=(s("hoverFontStyle")||s("fontStyle"),s("prefix")||""),h=e[d+"size"],c="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*h,g="node"===s("labelHoverColor")?e.color||s("defaultNodeColor"):s("defaultLabelHoverColor"),u=document.createElementNS(s("xmlns"),"g"),m=document.createElementNS(s("xmlns"),"rect"),f=document.createElementNS(s("xmlns"),"circle"),p=document.createElementNS(s("xmlns"),"text");return u.setAttributeNS(null,"class",s("classPrefix")+"-hover"),u.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(p.innerHTML=e.label,p.textContent=e.label,p.setAttributeNS(null,"class",s("classPrefix")+"-hover-label"),p.setAttributeNS(null,"font-size",c),p.setAttributeNS(null,"font-family",s("font")),p.setAttributeNS(null,"fill",g),p.setAttributeNS(null,"x",Math.round(e[d+"x"]+h+3)),p.setAttributeNS(null,"y",Math.round(e[d+"y"]+c/3)),r=Math.round(e[d+"x"]-c/2-2),o=Math.round(e[d+"y"]-c/2-2),a=Math.round(i.measureText(e.label).width+c/2+h+9),n=Math.round(c+4),l=Math.round(c/2+2),f.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),f.setAttributeNS(null,"fill","#fff"),f.setAttributeNS(null,"cx",e[d+"x"]),f.setAttributeNS(null,"cy",e[d+"y"]),f.setAttributeNS(null,"r",l),m.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),m.setAttributeNS(null,"fill","#fff"),m.setAttributeNS(null,"x",e[d+"x"]+l/4),m.setAttributeNS(null,"y",e[d+"y"]-l),m.setAttributeNS(null,"width",a),m.setAttributeNS(null,"height",n)),u.appendChild(f),u.appendChild(m),u.appendChild(p),u.appendChild(t),u}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var s,r,o,a,n,l,d,h,c=this.graph.nodes(),g=this.graph.edges(),u=this.settings.embedObjects(i||{}),m=u("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),f=m.minX,p=m.minY,y=m.maxX,x=m.maxY,v=m.sizeMax,b=m.weightMax,E=u("width")||1,w=u("height")||1,A=u("autoRescale"),T={nodePosition:1,nodeSize:1,edgeSize:1};for(A instanceof Array||(A=["nodePosition","nodeSize","edgeSize"]),s=0,r=A.length;r>s;s++)if(!T[A[s]])throw new Error('The rescale setting "'+A[s]+'" is not recognized.');var C=~A.indexOf("nodePosition"),S=~A.indexOf("nodeSize"),_=~A.indexOf("edgeSize");for(d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),h=(u("rescaleIgnoreSize")?0:(u("maxNodeSize")||v)/d)+(u("sideMargin")||0),y+=h,f-=h,x+=h,p-=h,d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),u("maxNodeSize")||u("minNodeSize")?u("maxNodeSize")===u("minNodeSize")?(o=0,a=+u("maxNodeSize")):(o=(u("maxNodeSize")-u("minNodeSize"))/v,a=+u("minNodeSize")):(o=1,a=0),u("maxEdgeSize")||u("minEdgeSize")?u("maxEdgeSize")===u("minEdgeSize")?(n=0,l=+u("minEdgeSize")):(n=(u("maxEdgeSize")-u("minEdgeSize"))/b,l=+u("minEdgeSize")):(n=1,l=0),s=0,r=g.length;r>s;s++)g[s][t+"size"]=g[s][e+"size"]*(_?n:1)+(_?l:0);for(s=0,r=c.length;r>s;s++)c[s][t+"size"]=c[s][e+"size"]*(S?o:1)+(S?a:0),c[s][t+"x"]=(c[s][e+"x"]-(y+f)/2)*(C?d:1),c[s][t+"y"]=(c[s][e+"y"]-(x+p)/2)*(C?d:1)},sigma.utils.getBoundaries=function(e,t,i){var s,r,o=e.edges(),a=e.nodes(),n=-1/0,l=-1/0,d=1/0,h=1/0,c=-1/0,g=-1/0;if(i)for(s=0,r=o.length;r>s;s++)n=Math.max(o[s][t+"size"],n);for(s=0,r=a.length;r>s;s++)l=Math.max(a[s][t+"size"],l),c=Math.max(a[s][t+"x"],c),d=Math.min(a[s][t+"x"],d),g=Math.max(a[s][t+"y"],g),h=Math.min(a[s][t+"y"],h);return n=n||1,l=l||1,{weightMax:n,sizeMax:l,minX:d,minY:h,maxX:c,maxY:g}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,s,r;if(t+""!=e+""){for(r=this.graph.nodes(),i=0,s=r.length;s>i;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(r=this.graph.edges(),i=0,s=r.length;s>i;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,s,r){if(!(i instanceof sigma.classes.camera&&"object"==typeof s&&s))throw"animation.camera: Wrong arguments.";if("number"!=typeof s.x&&"number"!=typeof s.y&&"number"!=typeof s.ratio&&"number"!=typeof s.angle)throw"There must be at least one valid coordinate in the given val.";var o,a,n,l,d,h,c=r||{},g=sigma.utils.dateNow();return h={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},d=c.duration,l="function"!=typeof c.easing?sigma.utils.easings[c.easing||"quadraticInOut"]:c.easing,o=function(){var t,r=c.duration?(sigma.utils.dateNow()-g)/c.duration:1;r>=1?(i.isAnimated=!1,i.goTo({x:s.x!==e?s.x:h.x,y:s.y!==e?s.y:h.y,ratio:s.ratio!==e?s.ratio:h.ratio,angle:s.angle!==e?s.angle:h.angle}),cancelAnimationFrame(a),delete sigma.misc.animation.running[a],"function"==typeof c.onComplete&&c.onComplete()):(t=l(r),i.isAnimated=!0,i.goTo({x:s.x!==e?h.x+(s.x-h.x)*t:h.x,y:s.y!==e?h.y+(s.y-h.y)*t:h.y,ratio:s.ratio!==e?h.ratio+(s.ratio-h.ratio)*t:h.ratio,angle:s.angle!==e?h.angle+(s.angle-h.angle)*t:h.angle}),"function"==typeof c.onNewFrame&&c.onNewFrame(),n.frameId=requestAnimationFrame(o))},a=t(),n={frameId:requestAnimationFrame(o),target:i,type:"camera",options:c,fn:o},sigma.misc.animation.running[a]=n,a},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,s=0,r="string"==typeof e?e:null,o="object"==typeof e?e:null,a=sigma.misc.animation.running;for(i in a)r&&a[i].type!==r||o&&a[i].target!==o||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),s++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return s},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,s="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||s&&r[t].target!==s))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function i(e){e&&(n="x"in e.data?e.data.x:n,l="y"in e.data?e.data.y:l);var i,s,r,o,a,h,c,g,u=[],m=n+d.width/2,f=l+d.height/2,p=d.camera.cameraPosition(n,l),y=d.camera.quadtree.point(p.x,p.y);if(y.length)for(i=0,r=y.length;r>i;i++)if(o=y[i],a=o[t+"x"],h=o[t+"y"],c=o[t+"size"],!o.hidden&&m>a-c&&a+c>m&&f>h-c&&h+c>f&&Math.sqrt(Math.pow(m-a,2)+Math.pow(f-h,2))<c){for(g=!1,s=0;s<u.length;s++)if(o.size>u[s].size){u.splice(s,0,o),g=!0;break}g||u.push(o)}return u}function s(i){function s(e,t){for(y=!1,a=0;a<e.length;a++)if(t.size>e[a].size){e.splice(a,0,t),y=!0;break}y||e.push(t)}if(!d.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&d instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(n="x"in i.data?i.data.x:n,l="y"in i.data?i.data.y:l);var o,a,h,c,g,u,m,f,p,y,x=d.settings("edgeHoverPrecision"),v={},b=[],E=n+d.width/2,w=l+d.height/2,A=d.camera.cameraPosition(n,l),T=[];if(r){var C=d.camera.quadtree.area(d.camera.getRectangle(d.width,d.height));for(c=C,o=0,h=c.length;h>o;o++)v[c[o].id]=c[o]}if(d.camera.edgequadtree!==e&&(T=d.camera.edgequadtree.point(A.x,A.y)),T.length)for(o=0,h=T.length;h>o;o++)g=T[o],m=d.graph.nodes(g.source),f=d.graph.nodes(g.target),u=g[t+"size"]||g["read_"+t+"size"],!g.hidden&&!m.hidden&&!f.hidden&&(!r||v[g.source]||v[g.target])&&sigma.utils.getDistance(m[t+"x"],m[t+"y"],E,w)>m[t+"size"]&&sigma.utils.getDistance(f[t+"x"],f[t+"y"],E,w)>f[t+"size"]&&("curve"==g.type||"curvedArrow"==g.type?m.id===f.id?(p=sigma.utils.getSelfLoopControlPoints(m[t+"x"],m[t+"y"],m[t+"size"]),sigma.utils.isPointOnBezierCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x1,p.y1,p.x2,p.y2,Math.max(u,x))&&s(b,g)):(p=sigma.utils.getQuadraticControlPoint(m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"]),sigma.utils.isPointOnQuadraticCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x,p.y,Math.max(u,x))&&s(b,g)):sigma.utils.isPointOnSegment(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],Math.max(u,x))&&s(b,g));return b}function r(e){function t(e){d.settings("eventsEnabled")&&(d.dispatchEvent("click",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("clickNode",{node:l[0],captor:e.data}),d.dispatchEvent("clickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("clickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("clickEdges",{edge:h,captor:e.data})):d.dispatchEvent("clickStage",{captor:e.data}))}function r(e){d.settings("eventsEnabled")&&(d.dispatchEvent("doubleClick",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("doubleClickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("doubleClickEdges",{edge:h,captor:e.data})):d.dispatchEvent("doubleClickStage",{captor:e.data}))}function o(e){d.settings("eventsEnabled")&&(d.dispatchEvent("rightClick",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("rightClickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("rightClickEdges",{edge:h,captor:e.data})):d.dispatchEvent("rightClickStage",{captor:e.data}))}function a(e){if(d.settings("eventsEnabled")){var t,i,s,r,o=[],a=[];for(t in c)o.push(c[t]);for(c={},i=0,s=o.length;s>i;i++)d.dispatchEvent("outNode",{node:o[i],captor:e.data});for(o.length&&d.dispatchEvent("outNodes",{nodes:o,captor:e.data}),g={},i=0,r=a.length;r>i;i++)d.dispatchEvent("outEdge",{edge:a[i],captor:e.data});a.length&&d.dispatchEvent("outEdges",{edges:a,captor:e.data})}}function n(e){if(d.settings("eventsEnabled")){l=i(e),h=s(e);var t,r,o,a,n=[],u=[],m={},f=l.length,p=[],y=[],x={},v=h.length;for(t=0;f>t;t++)o=l[t],m[o.id]=o,c[o.id]||(u.push(o),c[o.id]=o);for(r in c)m[r]||(n.push(c[r]),delete c[r]);for(t=0,f=u.length;f>t;t++)d.dispatchEvent("overNode",{node:u[t],captor:e.data});for(t=0,f=n.length;f>t;t++)d.dispatchEvent("outNode",{node:n[t],captor:e.data});for(u.length&&d.dispatchEvent("overNodes",{nodes:u,captor:e.data}),n.length&&d.dispatchEvent("outNodes",{nodes:n,captor:e.data}),t=0;v>t;t++)a=h[t],x[a.id]=a,g[a.id]||(y.push(a),g[a.id]=a);for(r in g)x[r]||(p.push(g[r]),delete g[r]);for(t=0,v=y.length;v>t;t++)d.dispatchEvent("overEdge",{edge:y[t],captor:e.data});for(t=0,v=p.length;v>t;t++)d.dispatchEvent("outEdge",{edge:p[t],captor:e.data});y.length&&d.dispatchEvent("overEdges",{edges:y,captor:e.data}),p.length&&d.dispatchEvent("outEdges",{edges:p,captor:e.data})}}var l,h,c={},g={};e.bind("click",t),e.bind("mousedown",n),e.bind("mouseup",n),e.bind("mousemove",n),e.bind("mouseout",a),e.bind("doubleclick",r),e.bind("rightclick",o),d.bind("render",n)}var o,a,n,l,d=this;for(o=0,a=this.captors.length;a>o;o++)r(this.captors[o])}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-hover")}}function i(e){if(a.settings("eventsEnabled")){a.dispatchEvent("click",e);var i=new t(e.target);i.isNode()?a.dispatchEvent("clickNode",{node:n.nodes(i.attr("data-node-id"))}):a.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function s(e){if(a.settings("eventsEnabled")){a.dispatchEvent("doubleClick",e);var i=new t(e.target);i.isNode()?a.dispatchEvent("doubleClickNode",{node:n.nodes(i.attr("data-node-id"))}):a.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){var i=e.toElement||e.target;if(a.settings("eventsEnabled")&&i){var s=new t(i);if(s.isNode())a.dispatchEvent("overNode",{node:n.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var r=n.edges(s.attr("data-edge-id"));a.dispatchEvent("overEdge",{edge:r,source:n.nodes(r.source),target:n.nodes(r.target)})}}}function o(e){var i=e.fromElement||e.originalTarget;if(a.settings("eventsEnabled")){var s=new t(i);if(s.isNode())a.dispatchEvent("outNode",{node:n.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var r=n.edges(s.attr("data-edge-id"));a.dispatchEvent("outEdge",{edge:r,source:n.nodes(r.source),target:n.nodes(r.target)})}}}var a=this,n=this.graph;e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",s),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",s),e.addEventListener("mouseover",r,!0),e.addEventListener("mouseout",o,!0)}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){var t,o,a,n,l,d=i.contexts.hover.canvas,h=i.settings("defaultNodeType"),c=i.settings("defaultEdgeType"),g=sigma.canvas.hovers,u=sigma.canvas.edgehovers,m=sigma.canvas.extremities,f=i.settings.embedObjects({prefix:e});if(i.contexts.hover.clearRect(0,0,d.width,d.height),f("enableHovering")&&f("singleHover")&&Object.keys(s).length&&(n=s[Object.keys(s)[0]],(g[n.type]||g[h]||g.def)(n,i.contexts.hover,f)),f("enableHovering")&&!f("singleHover"))for(t in s)(g[s[t].type]||g[h]||g.def)(s[t],i.contexts.hover,f);if(f("enableEdgeHovering")&&f("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],o=i.graph.nodes(l.source),a=i.graph.nodes(l.target),l.hidden||((u[l.type]||u[c]||u.def)(l,o,a,i.contexts.hover,f),f("edgeHoverExtremities")?(m[l.type]||m.def)(l,o,a,i.contexts.hover,f):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,i.contexts.hover,f)))),f("enableEdgeHovering")&&!f("singleHover"))for(t in r)l=r[t],o=i.graph.nodes(l.source),a=i.graph.nodes(l.target),l.hidden||((u[l.type]||u[c]||u.def)(l,o,a,i.contexts.hover,f),f("edgeHoverExtremities")?(m[l.type]||m.def)(l,o,a,i.contexts.hover,f):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,i.contexts.hover,f)))}var i=this,s={},r={};this.bind("overNode",function(e){var i=e.data.node;i.hidden||(s[i.id]=i,t())}),this.bind("outNode",function(e){delete s[e.data.node.id],t()}),this.bind("overEdge",function(e){var i=e.data.edge;i.hidden||(r[i.id]=i,t())}),this.bind("outEdge",function(e){delete r[e.data.edge.id],t()}),this.bind("render",function(){t()})}}.call(this);</script><script src="../bower_components/sigma/plugins/sigma.layout.forceAtlas2.min.js">(function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=options.worker!==!1&&webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(t){_this.nodesByteArray=new Float32Array(t.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(t){var e;try{e=new Blob([t],{type:"application/javascript"})}catch(s){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,e=new BlobBuilder,e.append(t),e=e.getBlob()}return e},Supervisor.prototype.graphToByteArrays=function(){var t,e,s,r=this.graph.nodes(),i=this.graph.edges(),o=r.length*this.ppn,n=i.length*this.ppe,a={};for(this.nodesByteArray=new Float32Array(o),this.edgesByteArray=new Float32Array(n),t=e=0,s=r.length;s>t;t++)a[r[t].id]=e,this.nodesByteArray[e]=r[t].x,this.nodesByteArray[e+1]=r[t].y,this.nodesByteArray[e+2]=0,this.nodesByteArray[e+3]=0,this.nodesByteArray[e+4]=0,this.nodesByteArray[e+5]=0,this.nodesByteArray[e+6]=1+this.graph.degree(r[t].id),this.nodesByteArray[e+7]=1,this.nodesByteArray[e+8]=r[t].size,this.nodesByteArray[e+9]=0,e+=this.ppn;for(t=e=0,s=i.length;s>t;t++)this.edgesByteArray[e]=a[i[t].source],this.edgesByteArray[e+1]=a[i[t].target],this.edgesByteArray[e+2]=i[t].weight||0,e+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var t=this.graph.nodes(),e=0,s=0,r=this.nodesByteArray.length;r>s;s+=this.ppn)t[e].x=this.nodesByteArray[s],t[e].y=this.nodesByteArray[s+1],e++},Supervisor.prototype.sendByteArrayToWorker=function(t){var e={action:t||"loop",nodes:this.nodesByteArray.buffer},s=[this.nodesByteArray.buffer];"start"===t&&(e.config=this.config||{},e.edges=this.edgesByteArray.buffer,s.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(e,s):_root.postMessage(e,"*")},Supervisor.prototype.start=function(){if(!this.running){this.running=!0;var t,e;for(t in this.sigInst.cameras)e=this.sigInst.cameras[t],e.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var t,e,s;for(t in this.sigInst.cameras)e=this.sigInst.cameras[t],e.edgequadtree._enabled=!0,s=sigma.utils.getBoundaries(this.graph,e.readPrefix),e.settings("drawEdges")&&e.settings("enableEdgeHovering")&&e.edgequadtree.index(this.sigInst.graph,{prefix:e.readPrefix,bounds:{x:s.minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(t){if(this.config=t,this.started){var e={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(e):_root.postMessage(e,"*")}},sigma.prototype.startForceAtlas2=function(t){return this.supervisor||(this.supervisor=new Supervisor(this,t)),t&&this.supervisor.configure(t),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(t){return this.supervisor||(this.supervisor=new Supervisor(this,t)),this.supervisor.configure(t),this},sigma.prototype.isForceAtlas2Running=function(){return!!this.supervisor&&this.supervisor.running}}).call(this),function(undefined){"use strict";function no_crush(t){var e,s,r,i=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],o=["source","target","weight"],n=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(s=0,r=n.length;r>s;s++)e=new RegExp("rp\\(([^,]*), '"+n[s]+"'\\)","g"),t=t.replace(e,0===s?"$1":"$1 + "+s);for(s=0,r=i.length;r>s;s++)e=new RegExp("np\\(([^,]*), '"+i[s]+"'\\)","g"),t=t.replace(e,0===s?"$1":"$1 + "+s);for(s=0,r=o.length;r>s;s++)e=new RegExp("ep\\(([^,]*), '"+o[s]+"'\\)","g"),t=t.replace(e,0===s?"$1":"$1 + "+s);return t}function getWorkerFn(){var t=crush?crush(Worker.toString()):Worker.toString();return";("+t+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(){function t(){var t,e,s={},r=arguments.length;for(t=r-1;t>=0;t--)for(e in arguments[t])s[e]=arguments[t][e];return s}function e(t){var e;for(e in t)"hasOwnProperty"in t&&!t.hasOwnProperty(e)||delete t[e];return t}function s(t,e,s){s=s||{},n=t,a=e,g.nodesLength=n.length,g.edgesLength=a.length,r(s)}function r(e){g.settings=t(e,g.settings)}function i(){var t,e,s,r,i,o,p,u,d,l,c,f,y,w,v;for(s=0;s<g.nodesLength;s+=g.ppn)n[s+4]=n[s+2],n[s+5]=n[s+3],n[s+2]=0,n[s+3]=0;if(g.settings.outboundAttractionDistribution){for(d=0,s=0;s<g.nodesLength;s+=g.ppn)d+=n[s+6];d/=g.nodesLength}if(g.settings.barnesHutOptimize){var k,m,b=1/0,M=-1/0,A=1/0,B=-1/0;for(h=[],s=0;s<g.nodesLength;s+=g.ppn)b=Math.min(b,n[s]),M=Math.max(M,n[s]),A=Math.min(A,n[s+1]),B=Math.max(B,n[s+1]);for(h[0]=-1,h[1]=(b+M)/2,h[2]=(A+B)/2,h[3]=Math.max(M-b,B-A),h[4]=-1,h[5]=-1,h[6]=0,h[7]=0,h[8]=0,t=1,s=0;s<g.nodesLength;s+=g.ppn)for(e=0;;)if(h[e+5]>=0)k=n[s]<h[e+1]?n[s+1]<h[e+2]?h[e+5]:h[e+5]+g.ppr:n[s+1]<h[e+2]?h[e+5]+2*g.ppr:h[e+5]+3*g.ppr,h[e+7]=(h[e+7]*h[e+6]+n[s]*n[s+6])/(h[e+6]+n[s+6]),h[e+8]=(h[e+8]*h[e+6]+n[s+1]*n[s+6])/(h[e+6]+n[s+6]),h[e+6]+=n[s+6],e=k;else{if(h[e]<0){h[e]=s;break}if(h[e+5]=t*g.ppr,p=h[e+3]/2,u=h[e+5],h[u]=-1,h[u+1]=h[e+1]-p,h[u+2]=h[e+2]-p,h[u+3]=p,h[u+4]=u+g.ppr,h[u+5]=-1,h[u+6]=0,h[u+7]=0,h[u+8]=0,u+=g.ppr,h[u]=-1,h[u+1]=h[e+1]-p,h[u+2]=h[e+2]+p,h[u+3]=p,h[u+4]=u+g.ppr,h[u+5]=-1,h[u+6]=0,h[u+7]=0,h[u+8]=0,u+=g.ppr,h[u]=-1,h[u+1]=h[e+1]+p,h[u+2]=h[e+2]-p,h[u+3]=p,h[u+4]=u+g.ppr,h[u+5]=-1,h[u+6]=0,h[u+7]=0,h[u+8]=0,u+=g.ppr,h[u]=-1,h[u+1]=h[e+1]+p,h[u+2]=h[e+2]+p,h[u+3]=p,h[u+4]=h[e+4],h[u+5]=-1,h[u+6]=0,h[u+7]=0,h[u+8]=0,t+=4,k=n[h[e]]<h[e+1]?n[h[e]+1]<h[e+2]?h[e+5]:h[e+5]+g.ppr:n[h[e]+1]<h[e+2]?h[e+5]+2*g.ppr:h[e+5]+3*g.ppr,h[e+6]=n[h[e]+6],h[e+7]=n[h[e]],h[e+8]=n[h[e]+1],h[k]=h[e],h[e]=-1,m=n[s]<h[e+1]?n[s+1]<h[e+2]?h[e+5]:h[e+5]+g.ppr:n[s+1]<h[e+2]?h[e+5]+2*g.ppr:h[e+5]+3*g.ppr,k!==m){h[m]=s;break}e=k}}if(g.settings.barnesHutOptimize)for(l=g.settings.scalingRatio,s=0;s<g.nodesLength;s+=g.ppn)for(e=0;;)if(h[e+5]>=0){if(w=Math.sqrt(Math.pow(n[s]-h[e+7],2)+Math.pow(n[s+1]-h[e+8],2)),2*h[e+3]/w<g.settings.barnesHutTheta){if(c=n[s]-h[e+7],f=n[s+1]-h[e+8],g.settings.adjustSizes?w>0?(v=l*n[s+6]*h[e+6]/w/w,n[s+2]+=c*v,n[s+3]+=f*v):0>w&&(v=-l*n[s+6]*h[e+6]/w,n[s+2]+=c*v,n[s+3]+=f*v):w>0&&(v=l*n[s+6]*h[e+6]/w/w,n[s+2]+=c*v,n[s+3]+=f*v),h[e+4]<0)break;e=h[e+4];continue}e=h[e+5]}else{if(h[e]>=0&&h[e]!==s&&(c=n[s]-n[h[e]],f=n[s+1]-n[h[e]+1],w=Math.sqrt(c*c+f*f),g.settings.adjustSizes?w>0?(v=l*n[s+6]*n[h[e]+6]/w/w,n[s+2]+=c*v,n[s+3]+=f*v):0>w&&(v=-l*n[s+6]*n[h[e]+6]/w,n[s+2]+=c*v,n[s+3]+=f*v):w>0&&(v=l*n[s+6]*n[h[e]+6]/w/w,n[s+2]+=c*v,n[s+3]+=f*v)),h[e+4]<0)break;e=h[e+4]}else for(l=g.settings.scalingRatio,r=0;r<g.nodesLength;r+=g.ppn)for(i=0;r>i;i+=g.ppn)c=n[r]-n[i],f=n[r+1]-n[i+1],g.settings.adjustSizes?(w=Math.sqrt(c*c+f*f)-n[r+8]-n[i+8],w>0?(v=l*n[r+6]*n[i+6]/w/w,n[r+2]+=c*v,n[r+3]+=f*v,n[i+2]+=c*v,n[i+3]+=f*v):0>w&&(v=100*l*n[r+6]*n[i+6],n[r+2]+=c*v,n[r+3]+=f*v,n[i+2]-=c*v,n[i+3]-=f*v)):(w=Math.sqrt(c*c+f*f),w>0&&(v=l*n[r+6]*n[i+6]/w/w,n[r+2]+=c*v,n[r+3]+=f*v,n[i+2]-=c*v,n[i+3]-=f*v));for(u=g.settings.gravity/g.settings.scalingRatio,l=g.settings.scalingRatio,s=0;s<g.nodesLength;s+=g.ppn)v=0,c=n[s],f=n[s+1],w=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),g.settings.strongGravityMode?w>0&&(v=l*n[s+6]*u):w>0&&(v=l*n[s+6]*u/w),n[s+2]-=c*v,n[s+3]-=f*v;for(l=1*(g.settings.outboundAttractionDistribution?d:1),o=0;o<g.edgesLength;o+=g.ppe)r=a[o],i=a[o+1],p=a[o+2],y=Math.pow(p,g.settings.edgeWeightInfluence),c=n[r]-n[i],f=n[r+1]-n[i+1],g.settings.adjustSizes?(w=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)-n[r+8]-n[i+8]),g.settings.linLogMode?g.settings.outboundAttractionDistribution?w>0&&(v=-l*y*Math.log(1+w)/w/n[r+6]):w>0&&(v=-l*y*Math.log(1+w)/w):g.settings.outboundAttractionDistribution?w>0&&(v=-l*y/n[r+6]):w>0&&(v=-l*y)):(w=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),g.settings.linLogMode?g.settings.outboundAttractionDistribution?w>0&&(v=-l*y*Math.log(1+w)/w/n[r+6]):w>0&&(v=-l*y*Math.log(1+w)/w):g.settings.outboundAttractionDistribution?(w=1,v=-l*y/n[r+6]):(w=1,v=-l*y)),w>0&&(n[r+2]+=c*v,n[r+3]+=f*v,n[i+2]-=c*v,n[i+3]-=f*v);var W,L,F,_;if(g.settings.adjustSizes)for(s=0;s<g.nodesLength;s+=g.ppn)n[s+9]||(W=Math.sqrt(Math.pow(n[s+2],2)+Math.pow(n[s+3],2)),W>g.maxForce&&(n[s+2]=n[s+2]*g.maxForce/W,n[s+3]=n[s+3]*g.maxForce/W),L=n[s+6]*Math.sqrt((n[s+4]-n[s+2])*(n[s+4]-n[s+2])+(n[s+5]-n[s+3])*(n[s+5]-n[s+3])),F=Math.sqrt((n[s+4]+n[s+2])*(n[s+4]+n[s+2])+(n[s+5]+n[s+3])*(n[s+5]+n[s+3]))/2,_=.1*Math.log(1+F)/(1+Math.sqrt(L)),n[s]=n[s]+n[s+2]*(_/g.settings.slowDown),n[s+1]=n[s+1]+n[s+3]*(_/g.settings.slowDown));else for(s=0;s<g.nodesLength;s+=g.ppn)n[s+9]||(L=n[s+6]*Math.sqrt((n[s+4]-n[s+2])*(n[s+4]-n[s+2])+(n[s+5]-n[s+3])*(n[s+5]-n[s+3])),F=Math.sqrt((n[s+4]+n[s+2])*(n[s+4]+n[s+2])+(n[s+5]+n[s+3])*(n[s+5]+n[s+3]))/2,_=n[s+7]*Math.log(1+F)/(1+Math.sqrt(L)),n[s+7]=Math.min(1,Math.sqrt(_*(Math.pow(n[s+2],2)+Math.pow(n[s+3],2))/(1+Math.sqrt(L)))),n[s]=n[s]+n[s+2]*(_/g.settings.slowDown),n[s+1]=n[s+1]+n[s+3]*(_/g.settings.slowDown));g.iterations++}function o(t){for(var e=0;t>e;e++)i();p()}var n,a,h,p,g={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}};p="undefined"!=typeof window&&window.document?function(){var t;document.createEvent?(t=document.createEvent("Event"),t.initEvent("newCoords",!0,!1)):(t=document.createEventObject(),t.eventType="newCoords"),t.eventName="newCoords",t.data={nodes:n.buffer},requestAnimationFrame(function(){document.dispatchEvent(t)})}:function(){self.postMessage({nodes:n.buffer},[n.buffer])};var u=function(t){switch(t.data.action){case"start":s(new Float32Array(t.data.nodes),new Float32Array(t.data.edges),t.data.config),o(g.settings.startingIterations);break;case"loop":n=new Float32Array(t.data.nodes),o(g.settings.iterationsPerRender);break;case"config":r(t.data.config);break;case"kill":e(g),n=null,a=null,h=null,self.removeEventListener("message",u)}};self.addEventListener("message",u)},crush=null;if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this);</script><script src="../sigma/plugins/sigma.plugins.dragNodes.min.js">(function(){"use strict";function e(e,n){function r(e){var n=window.getComputedStyle(e),r=function(e){return parseInt(n.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+r("padding-left"),top:e.getBoundingClientRect().top+r("padding-top")}}function t(e){x=!1,g.removeEventListener("mousemove",a),g.removeEventListener("mouseup",s),h.length||(f=null)}function i(e){b[e.data.node.id]||(h.push(e.data.node),b[e.data.node.id]=!0,h.length&&!x&&(f=h[h.length-1],m.addEventListener("mousedown",d)))}function o(e){var n=h.map(function(e){return e}).indexOf(e.data.node);h.splice(n,1),delete b[e.data.node.id],h.length&&!x?f=h[h.length-1]:m.removeEventListener("mousedown",d)}function d(e){x=!0;var n=l.graph.nodes().length;if(f&&n>1){m.removeEventListener("mousedown",d),g.addEventListener("mousemove",a),g.addEventListener("mouseup",s);var r,t;for(r in l.cameras)t=l.cameras[r],void 0!==t.edgequadtree&&(t.edgequadtree._enabled=!1);c.settings({mouseEnabled:!1,enableHovering:!1}),l.refresh(),u.dispatchEvent("startdrag",{node:f,captor:e,renderer:c})}}function s(e){x=!1,m.addEventListener("mousedown",d),g.removeEventListener("mousemove",a),g.removeEventListener("mouseup",s);var n,r;for(n in l.cameras)r=l.cameras[n],void 0!==r.edgequadtree&&(r.edgequadtree._enabled=!0);c.settings({mouseEnabled:!0,enableHovering:!0}),l.refresh(),E&&u.dispatchEvent("drop",{node:f,captor:e,renderer:c}),u.dispatchEvent("dragend",{node:f,captor:e,renderer:c}),E=!1,f=null}function a(e){function n(){for(var n=r(c.container),t=e.clientX-n.left,i=e.clientY-n.top,o=Math.cos(v.angle),d=Math.sin(v.angle),s=l.graph.nodes(),a=[],g=0;2>g;g++){var m=s[g],h={x:m.x*o+m.y*d,y:m.y*o-m.x*d,renX:m[p+"x"],renY:m[p+"y"]};a.push(h)}if(a[0].x===a[1].x&&a[0].y===a[1].y){var b=0===a[0].renX?1:a[0].renX,x=0===a[0].renY?1:a[0].renY;t=a[0].x/b*(t-a[0].renX)+a[0].x,i=a[0].y/x*(i-a[0].renY)+a[0].y}else{var b=(a[1].renX-a[0].renX)/(a[1].x-a[0].x),x=(a[1].renY-a[0].renY)/(a[1].y-a[0].y);a[1].x===a[0].x&&(b=x),a[1].y===a[0].y&&(x=b),t=(t-a[0].renX)/b+a[0].x,i=(i-a[0].renY)/x+a[0].y}f.x=t*o-i*d,f.y=i*o+t*d,l.refresh(),E=!0,u.dispatchEvent("drag",{node:f,captor:e,renderer:c})}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(t);var t=setTimeout(n,0)}else n()}if(sigma.classes.dispatcher.extend(this),sigma.renderers.webgl&&n instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.dragNodes is not compatible with the WebGL renderer");var u=this,l=e,g=document.body,c=n,m=n.container.lastChild,v=n.camera,f=null,p="",h=[],b={},x=!1,E=!1;n instanceof sigma.renderers.svg&&(m=n.container.firstChild),p=n instanceof sigma.renderers.webgl?n.options.prefix.substr(5):n.options.prefix,n.bind("overNode",i),n.bind("outNode",o),n.bind("click",t),l.bind("kill",function(){u.unbindAll()}),this.unbindAll=function(){m.removeEventListener("mousedown",d),g.removeEventListener("mousemove",a),g.removeEventListener("mouseup",s),c.unbind("overNode",i),c.unbind("outNode",o)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var n={};sigma.plugins.dragNodes=function(r,t){return n[r.id]||(n[r.id]=new e(r,t)),r.bind("kill",function(){sigma.plugins.killDragNodes(r)}),n[r.id]},sigma.plugins.killDragNodes=function(r){n[r.id]instanceof e&&(n[r.id].unbindAll(),delete n[r.id])}}).call(window);</script><script src="../bower_components/sigma/plugins/sigma.parsers.gexf.min.js">(function(e){"use strict";function t(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function i(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function r(e){function r(){var e={};return d.els.meta?(e.lastmodifieddate=d.els.meta.getAttribute("lastmodifieddate"),s.nodeListEach(d.els.meta.childNodes,function(t){e[t.tagName.toLowerCase()]=t.textContent}),e):e}function n(e){var t=[];return d.els.model[e]&&s.nodeListEach(d.els.model[e],function(e){var i={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},r=s.nodeListToArray(e.childNodes);r.length>0&&(i.defaultValue=r[0].textContent),t.push(i)}),t.length>0&&t}function a(e,t){var i={},r=t.getElementsByTagName("attvalue"),n=s.nodeListToHash(r,function(e){var t=s.namedNodeMapToObject(e.attributes),i=t.id||t["for"];return{key:i,value:t.value}});return e.map(function(e){i[e.id]=!(e.id in n)&&"defaultValue"in e?s.enforceType(e.type,e.defaultValue):s.enforceType(e.type,n[e.id])}),i}function o(e){var i=[];return s.nodeListEach(d.els.nodes,function(r){var n={id:r.getAttribute("id"),label:r.getAttribute("label")||""};e&&(n.attributes=a(e,r)),d.hasViz&&(n.viz=u(r)),i.push(t(n))}),i}function u(e){var t={},i=s.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=s.getRGB(r)}var n=s.getFirstElementByTagNS(e,"viz","position");n&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+n.getAttribute(e)}));var a=s.getFirstElementByTagNS(e,"viz","size");a&&(t.size=+a.getAttribute("value"));var o=s.getFirstElementByTagNS(e,"viz","shape");return o&&(t.shape=o.getAttribute("value")),t}function g(e,t){var r=[];return s.nodeListEach(d.els.edges,function(n){var o=s.namedNodeMapToObject(n.attributes);"type"in o||(o.type=t),e&&(o.attributes=a(e,n)),d.hasViz&&(o.viz=l(n)),r.push(i(o))}),r}function l(e){var t={},i=s.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=s.getRGB(r)}var n=s.getFirstElementByTagNS(e,"viz","shape");n&&(t.shape=n.getAttribute("value"));var a=s.getFirstElementByTagNS(e,"viz","thickness");return a&&(t.thickness=+a.getAttribute("value")),t}var d={};d.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:s.getModelTags(e)},d.hasViz=!!s.getAttributeNS(d.els.root,"xmlns","viz"),d.version=d.els.root.getAttribute("version")||"1.0",d.mode=d.els.graph.getAttribute("mode")||"static";var c=d.els.graph.getAttribute("defaultedgetype");d.defaultEdgetype=c||"undirected";var f=n("node"),v=n("edge"),p={version:d.version,mode:d.mode,defaultEdgeType:d.defaultEdgetype,meta:r(),model:{},nodes:o(f),edges:g(v,d.defaultEdgetype)};return f&&(p.model.node=f),v&&(p.model.edge=v),p}function n(e,t){var i=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(i){}}return null}();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";var r,n="function"==typeof t;return i.overrideMimeType?(i.overrideMimeType("text/xml"),r=function(e){return e.responseXML}):r=function(e){var t=new DOMParser;return t.parseFromString(e.responseText,"application/xml")},i.open("GET",e,n),n&&(i.onreadystatechange=function(){4===i.readyState&&t(r(i))}),i.send(),n?i:r(i)}function a(e){return r(e)}function o(e,t){return"function"==typeof t?n(e,function(e){t(r(e))}):r(n(e))}var s={getModelTags:function(e){var t,i=e.getElementsByTagName("attributes"),r={},n=i.length;for(t=0;n>t;t++)r[i[t].getAttribute("class")]=i[t].childNodes;return r},nodeListToArray:function(e){for(var t=[],i=0,r=e.length;r>i;++i)"#text"!==e[i].nodeName&&t.push(e[i]);return t},nodeListEach:function(e,t){for(var i=0,r=e.length;r>i;++i)"#text"!==e[i].nodeName&&t(e[i])},nodeListToHash:function(e,t){for(var i={},r=0;r<e.length;r++)if("#text"!==e[r].nodeName){var n=t(e[r]);i[n.key]=n.value}return i},namedNodeMapToObject:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},getFirstElementByTagNS:function(e,t,i){var r=e.getElementsByTagName(t+":"+i)[0];return r||(r=e.getElementsByTagNameNS(t,i)[0]),r||(r=e.getElementsByTagName(i)[0]),r},getAttributeNS:function(t,i,r){var n=t.getAttribute(i+":"+r);return n===e&&(n=t.getAttributeNS(i,r)),n===e&&(n=t.getAttribute(r)),n},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};if("undefined"!=typeof this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:a,fetch:o,version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}).call(this),function(){"use strict";function e(){return"e"+t++}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var t=0;sigma.parsers.gexf=function(t,i,r){function n(t){for(s=t.nodes,a=0,o=s.length;o>a;a++)u=s[a],u.id=u.id,u.viz&&"object"==typeof u.viz&&(u.viz.position&&"object"==typeof u.viz.position&&(u.x=u.viz.position.x,u.y=-u.viz.position.y),u.size=u.viz.size,u.color=u.viz.color);for(s=t.edges,a=0,o=s.length;o>a;a++)u=s[a],u.id="string"==typeof u.id?u.id:e(),u.source=""+u.source,u.target=""+u.target,u.viz&&"object"==typeof u.viz&&(u.color=u.viz.color,u.size=u.viz.thickness),u.size=u.weight,u.direction=u.type,delete u.type;if(i instanceof sigma){for(i.graph.clear(),s=t.nodes,a=0,o=s.length;o>a;a++)i.graph.addNode(s[a]);for(s=t.edges,a=0,o=s.length;o>a;a++)i.graph.addEdge(s[a])}else"object"==typeof i?(i.graph=t,i=new sigma(i)):"function"==typeof i&&(r=i,i=null);return r?void r(i||t):t}var a,o,s,u;if("string"==typeof t)gexf.fetch(t,n);else if("object"==typeof t)return n(gexf.parse(t))}}.call(this);</script><script src="../bower_components/sigma/plugins/sigma.parsers.json.min.js">(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var t,e;if(window.ActiveXObject){t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(e in t)try{return new ActiveXObject(t[e])}catch(s){}}return null},sigma.parsers.json=function(t,e,s){var i,n=sigma.utils.xhr();if(!n)throw"XMLHttpRequest not supported, cannot load the file.";n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&(i=JSON.parse(n.responseText),e instanceof sigma?(e.graph.clear(),e.graph.read(i)):"object"==typeof e?(e.graph=i,e=new sigma(e)):"function"==typeof e&&(s=e,e=null),s&&s(e||i))},n.send()}}).call(this);</script><script src="../bower_components/sigma/plugins/sigma.renderers.edgeLabels.min.js">(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var e={defaultEdgeLabelColor:"#000",defaultEdgeLabelActiveColor:"#000",defaultEdgeLabelSize:10,edgeLabelSize:"fixed",edgeLabelSizePowRatio:1,edgeLabelThreshold:1};sigma.settings=sigma.utils.extend(sigma.settings||{},e),sigma.settings.drawEdgeLabels=!0}).call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,a,i,l){if("string"==typeof e.label){var o=l("prefix")||"",s=e[o+"size"]||1;if(!(s<l("edgeLabelThreshold"))){var d,g,n,r=t[o+"size"],f=t[o+"x"],c=t[o+"y"],u=a[o+"x"],b=a[o+"y"],v=u-f,m=b-c,x=u>f?1:-1,L={},y=.5;t.id===a.id?(L=sigma.utils.getSelfLoopControlPoints(f,c,r),g=sigma.utils.getPointOnBezierCurve(y,f,c,u,b,L.x1,L.y1,L.x2,L.y2),n=Math.atan2(1,1)):(L=sigma.utils.getQuadraticControlPoint(f,c,u,b),g=sigma.utils.getPointOnQuadraticCurve(y,f,c,u,b,L.x,L.y),n=Math.atan2(m*x,v*x)),d="fixed"===l("edgeLabelSize")?l("defaultEdgeLabelSize"):l("defaultEdgeLabelSize")*s*Math.pow(s,-1/l("edgeLabelSizePowRatio")),i.save(),e.active?(i.font=[l("activeFontStyle"),d+"px",l("activeFont")||l("font")].join(" "),i.fillStyle="edge"===l("edgeActiveColor")?e.active_color||l("defaultEdgeActiveColor"):l("defaultEdgeLabelActiveColor")):(i.font=[l("fontStyle"),d+"px",l("font")].join(" "),i.fillStyle="edge"===l("edgeLabelColor")?e.color||l("defaultEdgeColor"):l("defaultEdgeLabelColor")),i.textAlign="center",i.textBaseline="alphabetic",i.translate(g.x,g.y),i.rotate(n),i.fillText(e.label,0,-s/2-3),i.restore()}}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,a,i,l){sigma.canvas.edges.labels.curve(e,t,a,i,l)}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,a,i,l){if("string"==typeof e.label&&t!=a){var o=l("prefix")||"",s=e[o+"size"]||1;if(!(s<l("edgeLabelThreshold"))){if(0===l("edgeLabelSizePowRatio"))throw'"edgeLabelSizePowRatio" must not be 0.';var d,g=(t[o+"x"]+a[o+"x"])/2,n=(t[o+"y"]+a[o+"y"])/2,r=a[o+"x"]-t[o+"x"],f=a[o+"y"]-t[o+"y"],c=t[o+"x"]<a[o+"x"]?1:-1,u=Math.atan2(f*c,r*c);d="fixed"===l("edgeLabelSize")?l("defaultEdgeLabelSize"):l("defaultEdgeLabelSize")*s*Math.pow(s,-1/l("edgeLabelSizePowRatio")),i.save(),e.active?(i.font=[l("activeFontStyle"),d+"px",l("activeFont")||l("font")].join(" "),i.fillStyle="edge"===l("edgeActiveColor")?e.active_color||l("defaultEdgeActiveColor"):l("defaultEdgeLabelActiveColor")):(i.font=[l("fontStyle"),d+"px",l("font")].join(" "),i.fillStyle="edge"===l("edgeLabelColor")?e.color||l("defaultEdgeColor"):l("defaultEdgeLabelColor")),i.textAlign="center",i.textBaseline="alphabetic",i.translate(g,n),i.rotate(u),i.fillText(e.label,0,-s/2-3),i.restore()}}}}.call(this);</script><script src="../bower_components/sigma/plugins/sigma.plugins.filter.min.js">(function(undefined){"use strict";function register(e,r,t){if(t!=undefined&&"string"!=typeof t)throw'The filter key "'+t.toString()+'" must be a string.';if(t!=undefined&&!t.length)throw"The filter key must be a non-empty string.";if("function"!=typeof e)throw'The predicate of key "'+t+'" must be a function.';if("undo"===t)throw'"undo" is a reserved key.';if(_keysIndex[t])throw'The filter "'+t+'" already exists.';t&&(_keysIndex[t]=!0),_chain.push({key:t,processor:e,predicate:r})}function unregister(e){_chain=_chain.filter(function(r){return!(r.key in e)});for(var r in e)delete _keysIndex[r]}function Filter(e){_s=e,_g=e.graph}function deepCopy(o){var copy=Object.create(null);for(var i in o)"object"==typeof o[i]&&null!==o[i]?copy[i]=deepCopy(o[i]):"function"==typeof o[i]&&null!==o[i]?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function cloneChain(e){for(var r=e.slice(0),t=0,n=r.length;n>t;t++)r[t]=deepCopy(r[t]),"function"==typeof r[t].processor&&(r[t].processor="filter.processors."+r[t].processor.name);return r}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",function(e){if("string"!=typeof e)throw"adjacentNodes: the node id must be a string.";var r,t=[];for(r in this.allNeighborsIndex[e])t.push(this.nodesIndex[r]);return t}),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",function(e){if("string"!=typeof e)throw"adjacentEdges: the node id must be a string.";var r,t,n=this.allNeighborsIndex[e],o=[];for(t in n)for(r in n[t])o.push(n[t][r]);return o});var _g=undefined,_s=undefined,_chain=[],_keysIndex=Object.create(null),Processors={};Processors.nodes=function(e){for(var r=_g.nodes(),t=r.length,n=_g.edges(),o=n.length;t--;)r[t].hidden=!e.call(_g,r[t])||r[t].hidden;for(;o--;)(_g.nodes(n[o].source).hidden||_g.nodes(n[o].target).hidden)&&(n[o].hidden=!0)},Processors.edges=function(e){for(var r=_g.edges(),t=r.length;t--;)r[t].hidden=!e.call(_g,r[t])||r[t].hidden},Processors.neighbors=function e(r){for(var t=_g.nodes(),n=t.length,o=_g.edges(),s=o.length,e=_g.adjacentNodes(r),i=e.length,d={};i--;)d[e[i].id]=!0;for(;n--;)t[n].id===r||t[n].id in d||(t[n].hidden=!0);for(;s--;)(_g.nodes(o[s].source).hidden||_g.nodes(o[s].target).hidden)&&(o[s].hidden=!0)},Filter.prototype.nodesBy=function(e,r){return register(Processors.nodes,e,r),this},Filter.prototype.edgesBy=function(e,r){return register(Processors.edges,e,r),this},Filter.prototype.neighborsOf=function(e,r){if("string"!=typeof e)throw'The node id "'+e.toString()+'" must be a string.';if(!e.length)throw"The node id must be a non-empty string.";return register(Processors.neighbors,e,r),this},Filter.prototype.apply=function(){for(var e=0,r=_chain.length;r>e;++e)_chain[e].processor(_chain[e].predicate);return _chain[0]&&"undo"===_chain[0].key&&_chain.shift(),_s.refresh(),this},Filter.prototype.undo=function(e){function r(){for(var e=_g.nodes(),r=e.length,t=_g.edges(),n=t.length;r--;)e[r].hidden=!1;for(;n--;)t[n].hidden=!1}var t=Object.create(null),n=arguments.length;if(1===n)if("[object Array]"===Object.prototype.toString.call(e))for(var o=0,s=e.length;s>o;o++)t[e[o]]=!0;else t[e]=!0;else if(n>1)for(var o=0;n>o;o++)t[arguments[o]]=!0;else this.clear();return unregister(t),_chain.unshift({key:"undo",processor:r}),this},Filter.prototype.clear=function(){return _chain.length=0,_keysIndex=Object.create(null),this},Filter.prototype["export"]=function(){var e=cloneChain(_chain);return e},Filter.prototype["import"]=function(e){if(e===undefined)throw"Wrong arguments.";if("[object Array]"!==Object.prototype.toString.call(e))throw'The chain" must be an array.';for(var r=cloneChain(e),t=0,n=r.length;n>t;t++){if(r[t].predicate===undefined||r[t].processor===undefined)throw"Wrong arguments.";if(r[t].key!=undefined&&"string"!=typeof r[t].key)throw'The filter key "'+r[t].key.toString()+'" must be a string.';if("function"!=typeof r[t].predicate)throw'The predicate of key "'+r[t].key+'" must be a function.';if("string"!=typeof r[t].processor)throw'The processor of key "'+r[t].key+'" must be a string.';switch(r[t].processor){case"filter.processors.nodes":r[t].processor=Processors.nodes;break;case"filter.processors.edges":r[t].processor=Processors.edges;break;case"filter.processors.neighbors":r[t].processor=Processors.neighbors;break;default:throw"Unknown processor "+r[t].processor}}return _chain=r,this};var filter=null;sigma.plugins.filter=function(e){return filter||(filter=new Filter(e)),filter}}).call(this);</script><script src="../bower_components/download-as-file/dist/download-as-file.js">!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.downloadAsFile=t():n.downloadAsFile=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return n[e].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){function e(n){o(i.object(n),"missing opts"),o(i.unemptyString(n.data),"missing data string",n),n.type=n.type||"text/plain";var t="text/plain"===n.type?"data:text/plain;charset=utf-8,"+encodeURIComponent(n.data):"data:"+n.type+"base64,"+window.btoa(unescape(encodeURIComponent(n.data))),r=document.createElement("a");r.download=n.filename||"data.txt",r.href=t,document.body.appendChild(r),r.click(),i.fn(r.remove)?r.remove():o.async(!1,"Missing element remove() method ...")}const o=r(1),i=r(2);n.exports=e},function(n,t){(function(t){!function(){function r(n){return n&&"number"==typeof n.length}function e(n){return"array with "+n.length+" items.\n["+n.map(i).join(",")+"]\n"}function o(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n}function i(n,t){if(o(n))return JSON.stringify(n);if(n instanceof Error)return n.name+" "+n.message;if(Array.isArray(n))return e(n);if(r(n))return e(Array.prototype.slice.call(n,0));var i;try{i=JSON.stringify(n,null,2)}catch(u){i="{ cannot stringify arg "+t+', it has type "'+typeof n+'"',i+="object"==typeof n?" with keys "+Object.keys(n).join(", ")+" }":" }"}return i}function u(n){return/\n$/.test(n)}function f(n){var t=n.reduce(function(n,t,r){if(r&&!u(n)&&(n+=" "),"string"==typeof t)return n+t;if("function"==typeof t){var e;try{e=t()}catch(o){e="[function "+t.name+" threw error!]"}return n+e}var f=i(t,r);return n+f},"");return t}function a(n){var t="function"==typeof n?n:null;if(t&&(n=t()),!n){var r=[].slice.call(arguments,1);return t&&r.unshift(t.toString()),new Error(f(r))}}function c(){return"object"==typeof t}function y(){return"object"==typeof window}function s(){return"object"==typeof n}function l(){c()&&(p(t,d,"lazyAss","la"),p(t,m,"lazyAssync","lac"))}function p(n,t,r,e){n[r]=n[e]=t}var d=function(){var n=a.apply(null,arguments);if(n)throw n},m=function(){var n=a.apply(null,arguments);n&&setTimeout(function(){throw n},0)};d.async=m,d.globalRegister=l,y()&&(p(window,d,"lazyAss","la"),p(window,m,"lazyAssync","lac")),s()&&(n.exports=d)}()}).call(t,function(){return this}())},function(n,t,r){(function(t){!function(){"use strict";function r(n,t){return function(r){if(t&&arguments.length>2)throw new Error("Curry2 function "+n.name+" called with too many arguments "+arguments.length);return 2===arguments.length?n(arguments[0],arguments[1]):function(t){return n(r,t)}}}function e(n){return"function"==typeof n}function o(n){return"string"==typeof n}function i(n){return o(n)&&n}function u(n){return"object"==typeof n&&!Array.isArray(n)&&!s(n)&&!d(n)}function f(n){return u(n)&&0===Object.keys(n).length}function a(n){return"number"==typeof n&&!isNaN(n)&&n!==1/0&&n!==-(1/0)}function c(n){return a(n)&&n%1===0}function y(n){return a(n)&&n%1!==0}function s(n){return null===n}function l(n){return a(n)&&n>0}function p(n){return a(n)&&n<0}function d(n){return n instanceof Date}function m(n){return n instanceof RegExp}function g(n,t){return n instanceof t}function h(n,t){return"number"==typeof n&&"number"!=typeof t?h(t,n):(Array.isArray(n)||o(n))&&n.length===t}function v(n){return n>=0}function b(n,t){return o(n)&&o(t)&&0===t.indexOf(n)}function w(n,t){return typeof t===n}function x(n){return o(n)&&(un(n)||fn(n))}function j(n){var t,r;for(t in n)if(n.hasOwnProperty(t)){if(r=n[t],u(r)&&j(r)===!1)return!1;if(r===!1)return!1}return!0}function A(n,t){var r,o,i={};for(r in t)t.hasOwnProperty(r)&&(o=t[r],e(o)?i[r]=o(n[r]):u(o)&&(i[r]=A(n[r],o)));return i}function O(n){return"undefined"!=typeof n}function E(n){return an.date(n)&&an.number(Number(n))}function S(n){return an.unemptyString(n)&&/^\d+\.\d+\.\d+$/.test(n)}function k(n){var t=typeof n;return"number"===t||"boolean"===t||"string"===t||"symbol"===t}function N(n){return"number"==typeof n&&0===n}function C(n,t){return n===t}function z(n,t){return O(n)&&D(n,"length")&&t>=0&&t<n.length}function F(n,t){return typeof n==typeof t&&n&&t&&n.length===t.length}function I(n){if(!an.array(n))return!1;if(!n.length)return!0;var t=n[0];return n.every(function(n){return n===t})}function R(n,t){return an.verify.array(n,"expected an array"),n.indexOf(t)!==-1}function $(n){return an.unemptyString(n)&&/^git@/.test(n)}function B(n){return 0===n||1===n}function U(n){return"boolean"==typeof n}function D(n,t){if(2!==arguments.length)throw new Error("Expected two arguments to check.has, got only "+arguments.length);return Boolean(n&&t&&"string"==typeof t&&"undefined"!=typeof n[t])}function J(n){return an.string(n)&&n.toLowerCase()===n}function L(n){return an.array(n)&&n.length>0}function M(n,t){return an.array(t)&&t.every(n)}function P(n,t){return an.verify.array(t,"expected array to find bad items"),t.filter(rn(n))}function q(n,t){var r=an.array(n)&&n.every(an.string);return r&&an.bool(t)&&t?n.every(an.lowerCase):r}function T(n,t){return an.array(n)&&n.every(function(n){return an.arrayOfStrings(n,t)})}function W(n,t){return an.verify.fn(an.every,"missing check.every method"),an.verify.fn(an.map,"missing check.map method"),an.verify.object(n,"missing object to check"),an.verify.object(t,"missing predicates object"),Object.keys(t).forEach(function(n){if(!an.fn(t[n]))throw new Error("not a predicate function for "+n+" but "+t[n])}),an.every(an.map(n,t))}function G(n,t){return W(t,n)}function H(n,t){an.verify.fn(n,"expected function that raises");try{n()}catch(r){return"undefined"==typeof t||"function"==typeof t&&t(r)}return!1}function K(n){return""===n}function Q(n){var t="string"==typeof n||Array.isArray(n);return t?!n.length:n instanceof Object&&!Object.keys(n).length}function V(n){var t="string"==typeof n||Array.isArray(n);return t?n.length:!(n instanceof Object)||Object.keys(n).length}function X(n){return an.number(n)&&n>=0&&n<=1}function Y(n){return an.string(n)&&cn.test(n)}function Z(n){return an.string(n)&&40===n.length&&yn.test(n)}function _(n){return an.string(n)&&7===n.length&&sn.test(n)}function nn(){var n=Array.prototype.slice.call(arguments,0);if(!n.length)throw new Error("empty list of arguments to or");return function(){var t=Array.prototype.slice.call(arguments,0);return n.some(function(n){try{return an.fn(n)?n.apply(null,t):Boolean(n)}catch(r){return!1}})}}function tn(){var n=Array.prototype.slice.call(arguments,0);if(!n.length)throw new Error("empty list of arguments to or");return function(){var t=Array.prototype.slice.call(arguments,0);return n.every(function(n){return an.fn(n)?n.apply(null,t):Boolean(n)})}}function rn(n){return function(){return!n.apply(null,arguments)}}function en(n){return an.object(n)&&dn(n)}function on(n,t){return n===t}if("function"!=typeof Function.prototype.bind)throw new Error("Missing Function.prototype.bind, please load es5-shim first");var un=b.bind(null,"http://"),fn=b.bind(null,"https://"),an={maybe:{},verify:{},not:{},every:j,map:A},cn=/^#(?:[0-9a-fA-F]{3}){1,2}$/,yn=/^[0-9a-f]{40}$/,sn=/^[0-9a-f]{7}$/;if(!an.defend){var ln=function(n,t,r){an.verify.fn(n,"expected a function"),an.verify.array(t,"expected list of predicates"),an.verify.defined(r,"missing args");var e=0,o=0,i=t.length;for(e=0;e<i;e+=1){var u=t[e];if(an.fn(u)){if(!u.call(null,r[o])){var f="Argument "+(o+1)+": "+r[o]+" does not pass predicate";throw an.unemptyString(t[e+1])&&(f+=": "+t[e+1]),new Error(f)}o+=1}}return n.apply(null,r)};an.defend=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return ln(n,t,arguments)}}}an.mixin||(an.mixin=function(n,t){function r(n,t,r){if(!u(n))throw new Error("missing object "+n);if(!i(t))throw new Error("missing name");if(!e(r))throw new Error("missing function");n[t]||(n[t]=r)}function f(n){return function(){return!(an.defined(arguments[0])&&!an.nulled(arguments[0]))||n.apply(null,arguments)}}function a(n,t){return function(){var r;if(n.apply(null,arguments)===!1)throw r=arguments[arguments.length-1],new Error(an.unemptyString(r)?r:t)}}if(o(n)&&e(t)){var c=n;n=t,t=c}if(!e(n))throw new Error("expected predicate function");if(i(t)||(t=n.name),!i(t))throw new Error("predicate function missing name\n"+n.toString());r(an,t,n),r(an.maybe,t,f(n)),r(an.not,t,rn(n)),r(an.verify,t,a(n,t+" failed"))}),an.then||(an.then=function(n,t){return function(){var r="function"==typeof n?n.apply(null,arguments):n;if(r)return t.apply(null,arguments)}});var pn={then:e};pn["catch"]=e,pn["finally"]=e;var dn=G.bind(null,pn),mn={nulled:s,fn:e,string:o,unemptyString:i,object:u,number:a,array:Array.isArray,positiveNumber:l,negativeNumber:p,positive:l,negative:p,defined:O,same:C,allSame:I,bit:B,bool:U,has:D,lowerCase:J,unemptyArray:L,arrayOfStrings:q,arrayOfArraysOfStrings:T,all:W,schema:r(G),raises:H,empty:Q,found:v,emptyString:K,unempty:V,unit:X,hexRgb:Y,sameLength:F,commitId:Z,shortCommitId:_,index:z,git:$,arrayOf:M,badItems:P,oneOf:r(R,!0),promise:en,validDate:E,equal:r(on),or:nn,and:tn,primitive:k,zero:N,date:d,regexp:m,instance:g,emptyObject:f,length:r(h),floatNumber:y,intNumber:c,startsWith:b,webUrl:x,semver:S,type:r(w)};Object.keys(mn).forEach(function(n){an.mixin(mn[n],n)}),n.exports=an,"object"==typeof window&&(window.check=an),"object"==typeof t&&(t.check=an)}()}).call(t,function(){return this}())}])});</script><script src="../bower_components/sigma/plugins/sigma.exporters.svg.min.js">(function(){"use strict";function e(e){return new Blob([e],{type:"image/svg+xml;charset=utf-8"})}function t(t,s){var i=e(t),a={};a.anchor=document.createElement("a"),a.anchor.setAttribute("href",r.createObjectURL(i)),a.anchor.setAttribute("download",s);var l=document.createEvent("MouseEvent");l.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.revokeObjectURL(i),a.anchor.dispatchEvent(l),delete a.anchor}function s(e,t,s){var r,i,l,o,n,d={},c={},u=0,h="";s.classes&&(i=document.createElementNS(a,"style"),e.insertBefore(i,e.firstChild));var g=e.querySelectorAll('[id="'+t+'-group-nodes"] > [class="'+t+'-node"]');for(o=0,n=g.length,l=!0;n>o;o++)r=g[o].getAttribute("fill"),s.data||g[o].removeAttribute("data-node-id"),s.classes&&(r in d||(d[r]=l?t+"-node":"c-"+u++,h+="."+d[r]+"{fill: "+r+"}"),d[r]!==t+"-node"&&g[o].setAttribute("class",g[o].getAttribute("class")+" "+d[r]),g[o].removeAttribute("fill")),l=!1;var v=e.querySelectorAll('[id="'+t+'-group-edges"] > [class="'+t+'-edge"]');for(o=0,n=v.length,l=!0;n>o;o++)r=v[o].getAttribute("stroke"),s.data||v[o].removeAttribute("data-edge-id"),s.classes&&(r in c||(c[r]=l?t+"-edge":"c-"+u++,h+="."+c[r]+"{stroke: "+r+"}"),c[r]!==t+"-edge"&&v[o].setAttribute("class",v[o].getAttribute("class")+" "+c[r]),v[o].removeAttribute("stroke")),l=!1;s.classes&&i.appendChild(document.createTextNode(h))}if("undefined"==typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var r=this.URL||this.webkitURL||this,i={size:"1000",width:"1000",height:"1000",classes:!0,labels:!0,data:!1,download:!1,filename:"graph.svg"},a="http://www.w3.org/2000/svg";sigma.prototype.toSVG=function(e){e=e||{};var r=this.settings("classPrefix"),a=e.size||e.width||i.size,l=e.size||e.height||i.size,o=document.createElement("div");o.setAttribute("width",a),o.setAttribute("height",l),o.setAttribute("style","position:absolute; top: 0px; left:0px; width: "+a+"px; height: "+l+"px;");var n=this.addCamera(),d=this.addRenderer({camera:n,container:o,type:"svg",forceLabels:!!e.labels});d.resize(a,l),this.refresh(),this.killRenderer(d),this.killCamera(n);var c=o.querySelector("svg");if(c.removeAttribute("style"),c.setAttribute("width",a+"px"),c.setAttribute("height",l+"px"),c.setAttribute("x","0px"),c.setAttribute("y","0px"),!e.labels){var u=c.querySelector('[id="'+r+'-group-labels"]');c.removeChild(u)}var h=c.querySelector('[id="'+r+'-group-hovers"]');c.removeChild(h),e.classes=e.classes!==!1,(!e.data||e.classes)&&s(c,r,e);var g=c.outerHTML;o=null;var v='<?xml version="1.0" encoding="utf-8"?>\n';return v+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n',v+=g,e.download&&t(v,e.filename||i.filename),v}}).call(this);</script><script src="../sigma/plugins/sigma.exporters.gexf.js">(function(e){"use strict";function t(e,t,r){var i=null,n=null,a=null;if(window.Blob?(i=new Blob([e],{type:"text/xml"}),n=window.URL.createObjectURL(i)):a="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e),navigator.msSaveBlob)navigator.msSaveBlob(i,r);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i,r);else{var d=document.createElement("a");d.setAttribute("href",window.Blob?n:a),d.setAttribute("download",r||"graph."+t),document.body.appendChild(d),d.click(),document.body.removeChild(d)}n&&setTimeout(function(){window.URL.revokeObjectURL(n)},0)}function r(e,t){return null===t?null:t.split(".").reduce(function(e,t){return e[t]},e)}function i(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,r,i){return t+t+r+r+i+i});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}function n(){var e=new Date,t=e.getDate(),r=e.getMonth()+1,i=e.getFullYear();return t<10&&(t="0"+t),r<10&&(r="0"+r),i+"-"+r+"-"+t}function a(e){return e===+e&&e===(0|e)}function d(e,t){return"integer"===t&&"number"==typeof e?a(e)||(t="float"):"number"!=typeof e&&(t="string","boolean"==typeof e&&(t="boolean")),t}if("undefined"==typeof sigma)throw"sigma.exporters.gexf: sigma is not declared";sigma.prototype.toGEXF=function(e){e=e||{};var a,l=document.implementation.createDocument("","",null),o=new XMLSerializer,s="",p=!0,c=this.graph.nodes(),u=this.graph.edges();e.renderer&&(p=e.renderer instanceof sigma.renderers.webgl,a=p?e.renderer.camera.prefix:e.renderer.camera.readPrefix);var m,h,b,f,v,g,C,A,w,E,x,y,N,z,O,U,B,L,S,j,k={},I=0,R={},T=0;B=l.createElement("gexf"),B.setAttribute("xmlns","http://www.gexf.net/1.2draft"),B.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),B.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),B.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),B.setAttribute("version","1.2"),z=l.createElement("meta"),z.setAttribute("lastmodifieddate",n()),e.creator&&(w=l.createElement("creator"),j=l.createTextNode(""+e.creator),w.appendChild(j),z.appendChild(w)),e.description&&(E=l.createElement("description"),j=l.createTextNode(""+e.description),E.appendChild(j),z.appendChild(E)),N=l.createElement("graph"),N.setAttribute("mode","static"),O=l.createElement("nodes");for(var F=0;F<c.length;F++){if(m=c[F],U=l.createElement("node"),U.setAttribute("id",m.id),m.label&&U.setAttribute("label",m.label),h=r(m,e.nodeAttributes),h&&(f=l.createElement("attvalues"),Object.keys(h).forEach(function(e){e in k||(k[e]={id:I,type:"integer"},I++);var t=h[e];k[e].type=d(t,k[e].type),v=l.createElement("attvalue"),v.setAttribute("for",k[e].id),v.setAttribute("value",t),f.appendChild(v)}),U.appendChild(f)),e.renderer){if(m.color){var D;D="#"===m.color[0]?i(m.color):m.color.match(/\d+/g),D.length>2&&(A=l.createElement("viz:color"),A.setAttribute("r",D[0]),A.setAttribute("g",D[1]),A.setAttribute("b",D[2]),D.length>3&&(5===D.length?A.setAttribute("a",D[3]+"."+D[4]):A.setAttribute("a",D[3])),U.appendChild(A))}L=l.createElement("viz:position"),L.setAttribute("x",m[a+"x"]),L.setAttribute("y",-parseInt(m[a+"y"],10)),U.appendChild(L),m.size&&(S=l.createElement("viz:size"),S.setAttribute("value",m[a+"size"]),U.appendChild(S))}O.appendChild(U)}g=l.createElement("attributes"),g.setAttribute("class","node"),Object.keys(k).forEach(function(e){b=l.createElement("attribute"),b.setAttribute("id",k[e].id),b.setAttribute("title",e),b.setAttribute("type",k[e].type),g.appendChild(b)}),x=l.createElement("edges");for(var F=0;F<u.length;F++){if(m=u[F],y=l.createElement("edge"),y.setAttribute("id",m.id),y.setAttribute("source",m.source),y.setAttribute("target",m.target),m.size&&y.setAttribute("weight",m.size),m.label&&y.setAttribute("label",m.label),h=r(m,e.edgeAttributes),h&&(f=l.createElement("attvalues"),Object.keys(h).forEach(function(e){e in R||(R[e]={id:T,type:"integer"},T++);var t=h[e];R[e].type=d(t,R[e].type),v=l.createElement("attvalue"),v.setAttribute("for",R[e].id),v.setAttribute("value",t),f.appendChild(v)}),y.appendChild(f)),e.renderer){if(m.color){var D;D="#"===m.color[0]?i(m.color):m.color.match(/\d+/g),D.length>2&&D.length<=5&&(A=l.createElement("viz:color"),A.setAttribute("r",D[0]),A.setAttribute("g",D[1]),A.setAttribute("b",D[2]),y.appendChild(A))}m.size&&(S=l.createElement("viz:size"),S.setAttribute("value",m.size),y.appendChild(S))}x.appendChild(y)}return C=l.createElement("attributes"),C.setAttribute("class","edge"),Object.keys(R).forEach(function(e){b=l.createElement("attribute"),b.setAttribute("id",R[e].id),b.setAttribute("title",e),b.setAttribute("type",R[e].type),C.appendChild(b)}),N.appendChild(g),N.appendChild(C),N.appendChild(O),N.appendChild(x),B.appendChild(z),B.appendChild(N),l.appendChild(B),s=o.serializeToString(l),e.download&&t(s,"gexf",e.filename),b&&b.parentNode.removeChild(b),f&&f.parentNode.removeChild(f),v&&v.parentNode.removeChild(v),A&&A.parentNode.removeChild(A),w&&w.parentNode.removeChild(w),E&&E.parentNode.removeChild(E),j&&j.parentNode.removeChild(j),L&&L.parentNode.removeChild(L),S&&S.parentNode.removeChild(S),U&&U.parentNode.removeChild(U),y&&y.parentNode.removeChild(y),g&&g.parentNode.removeChild(g),C&&C.parentNode.removeChild(C),O&&O.parentNode.removeChild(O),x&&x.parentNode.removeChild(x),N&&N.parentNode.removeChild(N),z&&z.parentNode.removeChild(z),B&&B.parentNode.removeChild(B),l=null,s}}).call(this);</script></head><body><dom-module id="sweva-visualization-graph"><template><style>#info-box dd,.title{text-overflow:ellipsis}:host{display:block;box-sizing:border-box;background-color:#fff;position:absolute;color:#000;overflow:hidden;left:0;top:0;right:0;bottom:0;height:100%;width:100%;font-family:Roboto,Noto,sans-serif;-webkit-font-smoothing:antialiased;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.hidden{display:none!important}#sigma-canvas{position:absolute;top:36px;left:0;right:0;bottom:60px}#info-box{display:block;position:absolute;top:40px;left:10px;max-height:800px;overflow:auto;width:150px;background:#fff;box-shadow:1px 1px 5px #aaa}#info-box .inner{padding:8px 0}#info-box dd,#info-box dt{font-size:12px;line-height:20px;padding:0 8px;letter-spacing:.011em}#info-box dl{margin:0}#info-box dt{font-weight:600;background:#eee}#info-box dd{font-weight:400;margin:0;overflow:hidden;text-align:right;word-break:break-all;max-height:40px}.filters,.menu,.title{padding:8px}.title{height:36px;line-height:36px;font-size:20px;font-weight:600;max-width:100%;white-space:nowrap;overflow:hidden;text-align:center}.horizontal-flex{display:flex;flex-direction:row;position:relative;align-items:center}.controls,.filters{border-top:1px solid #666;position:absolute}.filters{bottom:60px;width:100%;flex-wrap:wrap;background-color:rgba(255,255,255,.5)}label{font-size:12px;font-weight:400;letter-spacing:.011em;line-height:20px;display:block}.controls{height:60px;left:0;right:0;bottom:0}.controls button{position:relative;display:block;overflow:hidden;border-width:0;outline:0;border-radius:2px;box-shadow:0 1px 4px #777;background-color:#FFF;color:#000;padding:8px;margin:5px;text-transform:uppercase}.contols button:hover{background-color:#ddd}.horizontal-flex>*{flex:1}</style><div class="title">{{label}}</div><div id="sigma-canvas"></div><div id="info-box" class$="{{getInfoBoxClass(showInfoBox)}}" }=""><div class="inner"><dl><dt>Label</dt><dd style="text-align:left;height:40px;">{{display.label}}</dd><dt>Size</dt><dd>{{display.size}}</dd><dt>Degree</dt><dd>{{display.degree}}</dd><template is="dom-if" if="{{config.directed}}"><dt>In-Degree</dt><dd>{{display.inDegree}}</dd><dt>Out-Degree</dt><dd>{{display.outDegree}}</dd></template><template is="dom-repeat" items="{{display.attributes}}"><dt>{{item.key}}</dt><dd>{{item.value}}</dd></template></dl></div></div><div class="horizontal-flex filters"><div><label>Label</label> <input id="filter-label" type="text" value="" placeholder="prefix regex with r%"></div><div><label>Min. Degree</label> <input id="filter-degree" type="number" value="0" placeholder="0"></div><div><label>Custom</label> <input id="filter-key" type="text" value="" placeholder="key"> <input id="filter-value" type="text" value="" placeholder="(=|>|<) value"></div></div><div class="horizontal-flex controls"><div class="menu"><select id="export-select" name="select" style="width:100%"><option value="0" disabled="" selected="">Export as...</option><option value="1">SVG</option><option value="2">PNG</option><option value="2">GEXF (Gephi)</option></select></div><button id="reset-button">Reset</button></div><a id="hiddenLink" class="hidden"></a></template><script>Polymer({is:"sweva-visualization-graph",properties:{data:{type:Object,value:{nodes:[],edges:[]}},config:{type:Object,value:{}},oldConfigJSON:{type:String,value:""},display:{type:Object,value:{}},label:{type:String,value:""},showInfoBox:{type:Boolean,value:!0}},set:function(e){if(this.initialized=!1,this.initialized){if(e.config){var t=JSON.stringify(e.config);t!==this.oldConfigJSON&&Object.keys(e.config).length>0&&(this.clear(),this.oldConfigJSON=t,this.config=e.config,this.setup(this.config))}}else this.clear(),this.config=e.config||{},this.oldConfigJSON=JSON.stringify(this.config),this.setup(this.config);if(e.data){if(0==e.data.nodes.length)return;this.data=e.data,this.update()}},append:function(e){},ready:function(){try{sigma.classes.graph.addMethod("neighbors",function(e){var t,i={},a=this.allNeighborsIndex[e]||{};for(t in a)i[t]=this.nodesIndex[t];return i})}catch(e){}},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},setup:function(e){this.initialized=!0,this.config.label=e.label||"Graph",this.label=this.config.label,e.directed?this.config.directed=e.directed:this.config.directed=!1,e.curves?this.config.curves=e.curves:this.config.curves=!1,"undefined"!=typeof e.showInfoBox?this.config.showInfoBox=e.showInfoBox:this.config.showInfoBox=!0,this.showInfoBox=this.config.showInfoBox,this.config.defaultNodeColor=e.defaultNodeColor||"#ec5148";var t=this;this.sigma=new sigma({graph:{nodesd:[],edges:[]},container:"sigma-canvas",renderers:[{container:document.getElementById("sigma-canvas"),type:"canvas"}],settings:{defaultNodeColor:t.config.defaultNodeColor,edgeLabelSize:"proportional",defaultEdgeColor:"#777",defaultEdgeLabelColor:"#111",edgeLabelThreshold:2,minNodeSize:1,minArrowSize:6}}),this.filter=new sigma.plugins.filter(this.sigma),this.dragListener=sigma.plugins.dragNodes(this.sigma,this.sigma.renderers[0]),this.sigma.bind("clickNode",function(e){var i=e.data.node.id,a=t.sigma.graph.neighbors(i);a[i]=e.data.node,t.sigma.graph.nodes().forEach(function(e){a[e.id]?e.color=e.originalColor:e.color="#eee"}),t.sigma.graph.edges().forEach(function(e){a[e.source]&&a[e.target]?(e.color=e.originalColor,e.label=e.originalLabel):(e.color="#eee",e.label="")}),t.sigma.refresh()}),this.sigma.bind("doubleClickNode rightClickNode",function(e){t.fire("nodeclicked",e.data.node.attributes)}),this.sigma.bind("overNode",function(e){var i={};if(i.label=e.data.node.label||"none",i.size=parseInt(e.data.node.size||1),i.degree=t.sigma.graph.degree(e.data.node.id),i.inDegree=t.sigma.graph.degree(e.data.node.id,"in"),i.outDegree=t.sigma.graph.degree(e.data.node.id,"out"),i.attributes=[],e.data.node.attributes)for(var a=Object.keys(e.data.node.attributes),n=0;n<a.length;n++)i.attributes.push({key:a[n],value:e.data.node.attributes[a[n]]});t.display=i}),this.sigma.bind("clickStage",function(e){t.sigma.graph.nodes().forEach(function(e){e.color=e.originalColor}),t.sigma.graph.edges().forEach(function(e){e.color=e.originalColor}),t.sigma.refresh()})},attached:function(){this.$$("#export-select").addEventListener("click",this.handleExportClicked.bind(this),!1),this.$$("#reset-button").addEventListener("click",this.handleReset.bind(this),!1),this.$$("#filter-label").addEventListener("change",this.handleFilterLabel.bind(this),!1),this.$$("#filter-degree").addEventListener("change",this.handleFilterDegree.bind(this),!1),this.$$("#filter-key").addEventListener("change",this.handleFilterKey.bind(this),!1),this.$$("#filter-value").addEventListener("change",this.handleFilterValue.bind(this),!1)},detached:function(){},handleFilterLabel:function(e){var t=e.target.value;this.filter.undo("label"),t.length>0&&(0==t.indexOf("r%")?(t=t.substring(2),t=new RegExp(t),this.filter.nodesBy(function(e){return e.label.search(t)>-1},"label")):this.filter.nodesBy(function(e){return e.label.indexOf(t)>-1},"label")),this.filter.apply()},handleFilterDegree:function(e){var t=e.target.value;this.filter.undo("degree");var i=this;t>0&&this.filter.nodesBy(function(e){return i.sigma.graph.degree(e.id)>=t},"degree"),this.filter.apply()},handleFilterCommon:function(e,t){if(this.filter.undo("custom"),t.length>0&&e.length>0){var i="";if(t.length>=2){var a=t.charAt(0),n=t.charAt(1),s=a+n;["<=",">=","==","=>","=<"].indexOf(s)>=0?(i="=>"==s?">=":"=<"==s?"<=":s,t=t.substring(2).trim()):["<",">","="].indexOf(a)>=0&&(i="="==a?"==":a,t=t.substring(1).trim())}this.filter.nodesBy(function(a){if("undefined"==typeof a.attributes||"undefined"==typeof a.attributes[e])return!1;switch(i){case"<":return a.attributes[e]<t;case">":return a.attributes[e]>t;case"<=":return a.attributes[e]<=t;case">=":return a.attributes[e]>=t;case"==":default:return a.attributes[e]==t}},"custom")}this.filter.apply()},handleFilterKey:function(e){var t=e.target.value,i=this.$$("#filter-value").value;this.handleFilterCommon(t,i)},handleFilterValue:function(e){var t=e.target.value,i=this.$$("#filter-key").value;this.handleFilterCommon(i,t)},handleReset:function(){this.sigma.camera.goTo({x:0,y:0,ratio:1,angle:0}),this.$$("#filter-label").value="",this.$$("#filter-degree").value=0,this.$$("#filter-key").value="",this.$$("#filter-label").value="",this.filter.undo().apply(),this.filter.clear()},handleExportClicked:function(e){var t=e.target.selectedIndex;1==t?this.getSvg():2==t?this.getPng():3==t&&this.getGexf(),e.target.selectedIndex=0},getSvg:function(){this.sigma.toSVG({download:!0,filename:this.config.label+".svg"})},getPng:function(){var e=this.$$("#sigma-canvas .sigma-scene"),t=(e.getContext("2d"),this.config.label),i=this.$.hiddenLink,a=e.toDataURL("image/png");i.download=t+".png",i.href=a,i.click()},getGexf:function(){this.sigma.toGEXF({download:!0,filename:this.config.label+".gexf",nodeAttributes:"attributes",edgeAttributes:"attributes",renderer:this.sigma.renderers[0],creator:"Sigma.js",description:"This is an awesome graph!"})},resize:function(e,t){},update:function(e){"undefined"!=typeof e&&(this.data=e);for(var t=this,i=!0,a=0;a<this.data.nodes.length;a++){var n=this.data.nodes[a];"undefined"!=typeof n.x&&"undefined"!=typeof n.y||(i=!1,n.x=Math.random()*this.data.nodes.length,n.y=Math.random()*this.data.nodes.length),"undefined"==typeof n.size&&(n.size=1)}t.sigma.refresh(),t.sigma.graph.clear(),t.sigma.graph.read(this.data),t.sigma.graph.nodes().forEach(function(e){e.originalColor=e.color}),t.sigma.graph.edges().forEach(function(e){e.type="line",e.color||(e.color=t.sigma.graph.nodes(e.source).color),t.config.curves?t.config.directed?e.type="curvedArrow":e.type="curve":t.config.directed?e.type="arrow":e.type="line",e.originalColor=e.color,e.originalLabel=e.label}),i?t.sigma.refresh():(t.sigma.startForceAtlas2({linLogMode:!0,gravity:2}),setTimeout(function(){t.sigma.stopForceAtlas2()},3e3))},clear:function(){for(var e=this.$$("#sigma-canvas"),t=Polymer.dom(e).children,i=0;i<t.length;i++)Polymer.dom(e).removeChild(t[i]);Polymer.dom.flush(),this.sigma&&(this.sigma.graph.clear(),this.handleReset())},getInfoBoxClass:function(e){return e?"":"hidden"}});</script></dom-module></body></html>